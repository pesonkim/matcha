(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{278:function(e,t,n){},287:function(e,t,n){var r={"./ar":130,"./ar-ma":131,"./ar-ma.js":131,"./ar.js":130,"./bg":132,"./bg.js":132,"./br":133,"./br.js":133,"./bs":134,"./bs.js":134,"./ca":135,"./ca.js":135,"./cs":136,"./cs.js":136,"./cv":137,"./cv.js":137,"./cy":138,"./cy.js":138,"./da":139,"./da.js":139,"./de":140,"./de.js":140,"./el":141,"./el.js":141,"./en-au":142,"./en-au.js":142,"./en-ca":143,"./en-ca.js":143,"./en-gb":144,"./en-gb.js":144,"./eo":145,"./eo.js":145,"./es":146,"./es.js":146,"./et":147,"./et.js":147,"./eu":148,"./eu.js":148,"./fa":149,"./fa.js":149,"./fi":150,"./fi.js":150,"./fo":151,"./fo.js":151,"./fr":152,"./fr-ca":153,"./fr-ca.js":153,"./fr.js":152,"./gl":154,"./gl.js":154,"./he":155,"./he.js":155,"./hi":156,"./hi.js":156,"./hr":157,"./hr.js":157,"./hu":158,"./hu.js":158,"./id":159,"./id.js":159,"./is":160,"./is.js":160,"./it":161,"./it.js":161,"./ja":162,"./ja.js":162,"./ka":163,"./ka.js":163,"./ko":164,"./ko.js":164,"./lt":165,"./lt.js":165,"./lv":166,"./lv.js":166,"./ml":167,"./ml.js":167,"./mr":168,"./mr.js":168,"./ms-my":169,"./ms-my.js":169,"./nb":170,"./nb.js":170,"./ne":171,"./ne.js":171,"./nl":172,"./nl.js":172,"./nn":173,"./nn.js":173,"./pl":174,"./pl.js":174,"./pt":175,"./pt-br":176,"./pt-br.js":176,"./pt.js":175,"./ro":177,"./ro.js":177,"./ru":178,"./ru.js":178,"./sk":179,"./sk.js":179,"./sl":180,"./sl.js":180,"./sq":181,"./sq.js":181,"./sv":182,"./sv.js":182,"./th":183,"./th.js":183,"./tl-ph":184,"./tl-ph.js":184,"./tr":185,"./tr.js":185,"./tzm":186,"./tzm-la":187,"./tzm-la.js":187,"./tzm.js":186,"./uk":188,"./uk.js":188,"./uz":189,"./uz.js":189,"./vn":190,"./vn.js":190,"./zh-cn":191,"./zh-cn.js":191,"./zh-tw":192,"./zh-tw.js":192};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id=287},288:function(e,t,n){"use strict";n.r(t);var r=n(35),a=n.n(r),c=n(4),s=n(66),i=n(194),o=n(195),l=n(2),u=n.n(l),d=n(6),j=n(5),b=n(11),f=n.n(b),x=null,p=function(e){x="bearer ".concat(e)},m=function(){return{headers:{Authorization:x}}},h="http://localhost:3001/api/users",O=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(h,m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(h,t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat(h,"/").concat(t),m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(h,"/").concat(n),t,m());case 2:return r=e.sent,window.localStorage.setItem("user",JSON.stringify(r.data)),e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y={getUsers:O,createUser:g,getProfile:v,updateProfile:w},k=function(e){return e?1===e.length?e[0].substr(0,1):2===e.length?e.find((function(e){return"male"===e}))?e.find((function(e){return"female"===e}))?"fm":"mo":"fo":3===e.length?"fmo":void 0:null},N=function(e){var t=[];return e?(e.split("").length&&(e.split("").includes("f")&&t.push("female"),e.split("").includes("m")&&t.push("male"),e.split("").includes("o")&&t.push("other")),t):null},S=function(e){return e?e.split("#").splice(1).map((function(e){return"#"+e})):[]},R=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("http://localhost:3001/api/photos",t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E={addPhoto:R},C={notification:"",errorMessage:"",id:null,email:null,username:null,latitude:null,longitude:null,age:null,gender:null,orientation:null,bio:null,tags:null,photoStr:null},T=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.getProfile(e);case 3:r=t.sent,n({type:"POPULATE",data:r}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},L=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.addPhoto(e);case 3:r=t.sent,a=JSON.parse(window.localStorage.getItem("user")),window.localStorage.setItem("user",JSON.stringify(Object(j.a)(Object(j.a)({},a),{},{avatar:r.blob}))),n({type:"PHOTO",data:r}),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 13:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},D=function(e){return function(t){t({type:"ERROR",data:e})}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"POPULATE":return Object(j.a)(Object(j.a)({},e),{},{email:t.data.email,username:t.data.username,firstname:t.data.firstname,lastname:t.data.lastname,gender:t.data.gender,orientation:N(t.data.orientation),bio:t.data.bio,tags:S(t.data.tags),photoStr:t.data.avatar});case"PREVIEW":return Object(j.a)(Object(j.a)({},e),{},{photoStr:t.data});case"PHOTO":return Object(j.a)(Object(j.a)({},e),{},{photoStr:t.data.blob});case"GENDER":return Object(j.a)(Object(j.a)({},e),{},{gender:t.data.gender});case"ORIENTATION":return Object(j.a)(Object(j.a)({},e),{},{orientation:t.data.orientation});case"BIO":return Object(j.a)(Object(j.a)({},e),{},{bio:t.data.bio});case"TAGS":return Object(j.a)(Object(j.a)({},e),{},{tags:t.data.tags});case"NOTIF":return Object(j.a)(Object(j.a)({},e),{},{notification:t.data,errorMessage:""});case"ERROR":return Object(j.a)(Object(j.a)({},e),{},{errorMessage:t.data,notification:""});case"CLEAR":return Object(j.a)(Object(j.a)({},e),{},{errorMessage:"",notification:""});default:return e}},I=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("http://localhost:3001/api/login",t);case 2:return n=e.sent,window.localStorage.setItem("user",JSON.stringify(n.data)),p(n.data.token),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F={login:I,logout:function(){window.localStorage.clear(),window.location.href="/"}},M=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("http://localhost:3001/api/reset",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("http://localhost:3001/api/reset/new",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P={forgot:M,reset:B},W={id:null,username:null,email:null,token:null,loggedIn:!1,userComplete:!1,ip:null,latitude:null,longitude:null,age:null,gender:null,orientation:null,bio:null,tags:null,avatar:null},z=function(e,t){return function(){var n=Object(d.a)(u.a.mark((function n(r){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y.updateProfile(e,t);case 3:a=n.sent,r({type:"PROFILE",data:a}),r({type:"NOTIF",data:"Profile updated"}),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),a=n.t0.response&&n.t0.response.data?n.t0.response.data.error:"Database error",r({type:"ERROR",data:a});case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN":return Object(j.a)(Object(j.a)({},e),{},{id:t.data.id,username:t.data.username,email:t.data.email,firstname:t.data.firstname,lastname:t.data.lastname,token:t.data.token,age:t.data.age,gender:t.data.gender,orientation:N(t.data.orientation),bio:t.data.bio,tags:S(t.data.tags),loggedIn:!0,userComplete:!(!t.data.gender||!t.data.orientation),latitude:t.data.latitude,longitude:t.data.longitude,avatar:t.data.avatar});case"LOGOUT":return W;case"LOOKUP":return Object(j.a)(Object(j.a)({},e),{},{ip:t.data.ip});case"PROFILE":return Object(j.a)(Object(j.a)({},e),{},{email:t.data.email,username:t.data.username,firstname:t.data.firstname,lastname:t.data.lastname,gender:t.data.gender,token:t.data.token,orientation:N(t.data.orientation),bio:t.data.bio,tags:S(t.data.tags),userComplete:!(!t.data.gender||!t.data.orientation),latitude:t.data.latitude,longitude:t.data.longitude,avatar:t.data.avatar});case"PHOTO":return Object(j.a)(Object(j.a)({},e),{},{avatar:t.data.blob});default:return e}},H="http://localhost:3001/api/tags",Y=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(H,m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(H,t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V={getTags:Y,addTags:G},_=n(28),K={ids:null,users:[],profile:null,sortFilter:null,allTags:null,filterTags:[],filterSliders:{distance:500,age:[16,100],fame:[0,500]},loadingApp:!0,loadingUsers:!0},q=function(e,t,n,r,a,c,s){return function(){var i=Object(d.a)(u.a.mark((function i(o){var l,d;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,y.getUsers();case 3:l=i.sent,s.length&&(l=l.filter((function(e){return!s.map((function(e){return e.receiver})).includes(e.id)}))),l.map((function(e){e.orientation=N(e.orientation),e.tags=S(e.tags)})),e.length&&(l=l.filter((function(t){return e.every((function(e){return t.tags.includes(e)}))}))),t&&(t.distance&&(l=l.filter((function(e){return e.distance=Object(_.getDistance)({latitude:e.latitude,longitude:e.longitude},{latitude:a,longitude:c}),e.distance=Math.ceil(Object(_.convertDistance)(e.distance,"km")),e.distance<=t.distance}))),t.age&&(l=l.filter((function(e){return e.age>=t.age[0]&&e.age<=t.age[1]}))),t.fame&&(l=l.filter((function(e){return e.fame>=t.fame[0]&&e.fame<=t.fame[1]})))),"distance (ascending)"===n?l=l.sort((function(e,t){return e.distance=Object(_.getDistance)({latitude:e.latitude,longitude:e.longitude},{latitude:a,longitude:c}),t.distance=Object(_.getDistance)({latitude:t.latitude,longitude:t.longitude},{latitude:a,longitude:c}),e.distance-t.distance})):"distance (descending)"===n?l=l.sort((function(e,t){return e.distance=Object(_.getDistance)({latitude:e.latitude,longitude:e.longitude},{latitude:a,longitude:c}),t.distance=Object(_.getDistance)({latitude:t.latitude,longitude:t.longitude},{latitude:a,longitude:c}),t.distance-e.distance})):"fame (ascending)"===n?l=l.sort((function(e,t){return e.fame-t.fame})):"fame (descending)"===n?l=l.sort((function(e,t){return t.fame-e.fame})):"age (ascending)"===n?l=l.sort((function(e,t){return e.age-t.age})):"age (descending)"===n?l=l.sort((function(e,t){return t.age-e.age})):"tags in common"===n&&(d=(d=l.filter((function(e){return r.some((function(t){return e.tags.includes(t)}))}))).sort((function(e,t){return e.matches=e.tags.filter((function(e){return r.some((function(t){return e.includes(t)}))})),t.matches=t.tags.filter((function(e){return r.some((function(t){return e.includes(t)}))})),t.matches.length-e.matches.length})),l=l.filter((function(e){return!d.map((function(e){return e.id})).includes(e.id)})),l=d.concat(l)),o({type:"SETUSERS",data:l}),i.next=16;break;case 12:i.prev=12,i.t0=i.catch(0),l=i.t0.response&&i.t0.response.data?i.t0.response.data.error:"Database error",o({type:"ERROR",data:l});case 16:case"end":return i.stop()}}),i,null,[[0,12]])})));return function(e){return i.apply(this,arguments)}}()},Z=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.getUsers();case 3:(r=(r=t.sent).find((function(t){return t.id===e}))).orientation=N(r.orientation),r.tags=S(r.tags),n({type:"SETPROFILE",data:r}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},J=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],t.prev=1,t.next=4,y.getUsers();case 4:(r=t.sent).map((function(e){return a.push(e.id)})),e.length&&(a=a.filter((function(t){return!e.map((function(e){return e.receiver})).includes(t)}))),n({type:"SETIDS",data:a}),n({type:"LOADINGAPP",data:!1}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},Q=function(){return function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.getTags();case 3:n=e.sent,t({type:"SETTAGS",data:n}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.response&&e.t0.response.data?e.t0.response.data.error:"Database error",t({type:"ERROR",data:n});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},$=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,a,c,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.getTags();case 3:return r=t.sent,a=S(r),c=Array.from(new Set(a.concat(e))),s=c?c.map((function(e){return e})).join(""):"",t.next=9,V.addTags({tags:s});case 9:return t.next=11,V.getTags();case 11:r=t.sent,n({type:"SETTAGS",data:r}),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}()},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETTAGS":return Object(j.a)(Object(j.a)({},e),{},{allTags:S(t.data)});case"SETFILTERTAGS":return Object(j.a)(Object(j.a)({},e),{},{filterTags:t.data});case"SETSLIDERS":return Object(j.a)(Object(j.a)({},e),{},{filterSliders:t.data});case"RESETFILTERS":return Object(j.a)(Object(j.a)({},e),{},{filterSliders:K.filterSliders,filterTags:K.filterTags});case"SETSORT":return Object(j.a)(Object(j.a)({},e),{},{sortFilter:t.data.sortFilter});case"SETUSERS":return Object(j.a)(Object(j.a)({},e),{},{users:t.data});case"SETIDS":return Object(j.a)(Object(j.a)({},e),{},{ids:t.data});case"LOADINGAPP":return Object(j.a)(Object(j.a)({},e),{},{loadingApp:t.data});case"LOADINGUSERS":return Object(j.a)(Object(j.a)({},e),{},{loadingUsers:t.data});case"SETPROFILE":return Object(j.a)(Object(j.a)({},e),{},{profile:t.data});default:return e}},ee="http://localhost:3001/api/views",te={getViews:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(ee,m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addView:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(ee,t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ne="http://localhost:3001/api/likes",re={getLikes:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(ne,m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addLike:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(ne,t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateRead:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(ne,"/").concat(t.from),t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeLike:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m(),e.next=3,f.a.delete("".concat(ne,"/").concat(t.id),{headers:n.headers,data:t});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ae="http://localhost:3001/api/reports",ce={getReports:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(ae,m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addReport:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(ae,t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},se="http://localhost:3001/api/blocks",ie={getBlocks:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(se,m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addBlock:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(se,t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeBlock:function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m(),e.next=3,f.a.delete("".concat(se,"/").concat(t.id),{headers:n.headers,data:t});case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},oe={getMatches:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://localhost:3001/api/matches",m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getPublicLikes:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("http://localhost:3001/api/matches/likes",m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},le="http://localhost:3001/api/messages",ue={getMessages:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(le,m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addMessage:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(le,t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateMessages:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(le,"/").concat(t.receiver),t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},de="http://localhost:3001/api/notif",je={getNotif:function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get(de,m());case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addNotif:function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post(de,t,m());case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateNotif:function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.put("".concat(de,"/").concat(n),t,m());case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},be=n(75),fe=n.n(be),xe=fe()("localhost:3001"),pe={likes:[],publicLikes:[],reports:[],blocks:null,log:[],notif:[],matches:[]},me=function(){return function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe.getMatches();case 3:return(n=e.sent).map((function(e){e.orientation=N(e.orientation),e.tags=S(e.tags)})),e.next=7,ie.getBlocks();case 7:return(r=e.sent)&&r.length&&(n=n.filter((function(e){return!r.map((function(e){return e.receiver})).includes(e.id)}))),e.next=11,ue.getMessages();case 11:return a=e.sent,n.map((function(e){e.chat=a.filter((function(t){return t.sender===e.id||t.receiver===e.id}))})),n=n.sort((function(e,t){return e.latest=e.chat.length?e.chat[e.chat.length-1].created_at:e.created_at,t.latest=t.chat.length?t.chat[t.chat.length-1].created_at:t.created_at,new Date(t.latest)-new Date(e.latest)})),t({type:"SETMATCHES",data:n}),e.next=17,oe.getPublicLikes();case 17:c=e.sent,t({type:"SETPUBLICLIKES",data:c}),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(0),n=e.t0.response&&e.t0.response.data?e.t0.response.data.error:"Database error",t({type:"ERROR",data:n});case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}()},he=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,je.getNotif();case 3:return r=t.sent,t.next=6,ie.getBlocks();case 6:(a=t.sent)&&a.length&&(r=r.filter((function(e){return!a.map((function(e){return e.receiver})).includes(e.sender)}))),r=(r=(r=r.filter((function(t){return t.receiver===e}))).filter((function(e){return"view"===e.action||"like"===e.action||"unlike"===e.action}))).reverse(),n({type:"SETNOTIF",data:r}),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 18:case"end":return t.stop()}}),t,null,[[0,14]])})));return function(e){return t.apply(this,arguments)}}()},Oe=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,je.getNotif();case 3:(r=(r=t.sent).filter((function(t){return t.sender===e}))).map((function(e){switch(e.action){case"view":return e.action="Viewed";case"like":return e.action="Liked";case"unlike":return e.action="Unliked";case"report":return e.action="Reported";case"block":return e.action="Blocked";case"unblock":return e.action="Unblocked"}})),r=r.reverse(),n({type:"SETLOG",data:r}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},ge=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,te.addView(e);case 3:return t.next=5,je.addNotif({action:"view",sender:e.from,receiver:e.to});case 5:xe.emit("sendNotification",{action:"view",sender:e.from,receiver:e.to},(function(e){e&&console.log(e)})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},ve=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"new"!==e.type){t.next=9;break}return t.next=4,re.addLike(e);case 4:return t.next=6,je.addNotif({action:"like",sender:e.from,receiver:e.to});case 6:xe.emit("sendNotification",{action:"like",sender:e.from,receiver:e.to},(function(e){e&&console.log(e)})),t.next=20;break;case 9:if("remove"!==e.type){t.next=17;break}return t.next=12,re.removeLike(e);case 12:return t.next=14,je.addNotif({action:"unlike",sender:e.from,receiver:e.to});case 14:xe.emit("sendNotification",{action:"unlike",sender:e.from,receiver:e.to},(function(e){e&&console.log(e)})),t.next=20;break;case 17:if("read"!==e.type){t.next=20;break}return t.next=20,re.updateRead(e);case 20:return t.next=22,re.getLikes();case 22:r=t.sent,n({type:"SETLIKES",data:r}),t.next=30;break;case 26:t.prev=26,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 30:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e){return t.apply(this,arguments)}}()},we=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ce.addReport(e);case 3:return t.next=5,je.addNotif({action:"report",sender:e.from,receiver:e.to});case 5:return t.next=7,ce.getReports();case 7:r=t.sent,n({type:"SETREPORTS",data:r}),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 15:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}()},ye=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r,a,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"new"!==e.type){t.next=8;break}return t.next=4,ie.addBlock(e);case 4:return t.next=6,je.addNotif({action:"block",sender:e.from,receiver:e.to});case 6:t.next=13;break;case 8:if("remove"!==e.type){t.next=13;break}return t.next=11,ie.removeBlock(e);case 11:return t.next=13,je.addNotif({action:"unblock",sender:e.from,receiver:e.to});case 13:return t.next=15,ie.getBlocks();case 15:return r=t.sent,n({type:"SETBLOCKS",data:r}),t.next=19,re.getLikes();case 19:if(a=t.sent,!(c=a.find((function(t){return t.receiver===e.to})))){t.next=24;break}return t.next=24,n(ve({from:c.sender,to:c.receiver,type:"remove",id:c.id}));case 24:t.next=30;break;case 26:t.prev=26,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 30:case"end":return t.stop()}}),t,null,[[0,26]])})));return function(e){return t.apply(this,arguments)}}()},ke=function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,"new"!==e.type){t.next=7;break}return t.next=4,ue.addMessage(e);case 4:xe.emit("sendMessage",{message:e},(function(e){e&&console.log(e)})),t.next=10;break;case 7:if("read"!==e.type){t.next=10;break}return t.next=10,ue.updateMessages(e);case 10:n(me()),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 17:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e){return t.apply(this,arguments)}}()},Ne=function(e,t){return function(){var n=Object(d.a)(u.a.mark((function n(r){var a;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,je.updateNotif(e,t);case 3:return n.next=5,r(he(t));case 5:n.next=11;break;case 7:n.prev=7,n.t0=n.catch(0),a=n.t0.response&&n.t0.response.data?n.t0.response.data.error:"Database error",r({type:"ERROR",data:a});case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SETLIKES":return Object(j.a)(Object(j.a)({},e),{},{likes:t.data});case"SETREPORTS":return Object(j.a)(Object(j.a)({},e),{},{reports:t.data});case"SETBLOCKS":return Object(j.a)(Object(j.a)({},e),{},{blocks:t.data});case"SETLOG":return Object(j.a)(Object(j.a)({},e),{},{log:t.data});case"SETNOTIF":return Object(j.a)(Object(j.a)({},e),{},{notif:t.data});case"SETPUBLICLIKES":return Object(j.a)(Object(j.a)({},e),{},{publicLikes:t.data});case"SETMATCHES":return Object(j.a)(Object(j.a)({},e),{},{matches:t.data});default:return e}},Re=Object(s.combineReducers)({form:A,user:U,public:X,match:Se}),Ee=Object(s.createStore)(Re,Object(o.composeWithDevTools)(Object(s.applyMiddleware)(i.a))),Ce=n(12),Te=(n(277),n(278),n(21)),Le=n(13),De=n(15),Ae=n(19),Ie=n(0),Fe=n(1),Me=function(){var e=Object(c.c)((function(e){return e.user})),t=e.loggedIn,n=e.id,r=Object(c.c)((function(e){return e.match})),a=r.matches,s=r.notif,i=r.likes,o=Object(Ie.useState)(null),l=Object(Le.a)(o,2),u=l[0],d=l[1],j=Object(Ie.useState)(null),b=Object(Le.a)(j,2),f=b[0],x=b[1];Object(Ie.useEffect)((function(){if(a&&i){var e=0;a.map((function(t){var r=i.find((function(e){return e.receiver===t.id}));if(t.chat.length){var a=t.chat.filter((function(e){return e.receiver===n&&0===e.status}));a&&a.length?e+=a.length:r&&0===r.is_seen&&e++}else r&&0===r.is_seen&&e++})),d(e?e<99?e:99:null)}}),[a,i]),Object(Ie.useEffect)((function(){if(s){var e=0;s.map((function(t){return 0===t.status?e++:null})),x(e?e<99?e:99:null)}}),[s]);return Object(Fe.jsx)("header",{className:"h-16 w-full flex justify-center fixed top-0 left-0 right-0 z-50 ui-shadow",style:{backgroundColor:"rgba(255, 255, 255, 0.5)",backdropFilter:"blur(5px)"},children:Object(Fe.jsxs)("section",{className:"w-full max-w-screen-lg flex justify-between items-center mx-4",children:[Object(Fe.jsx)("section",{className:"flex items-center",children:Object(Fe.jsxs)(Ce.b,{to:"/",className:"flex items-center hover:opacity-50 select-none",children:[Object(Fe.jsx)("p",{className:"text-2xl",children:"matcha "}),Object(Fe.jsx)(De.e,{className:" h-6 w-6"})]})}),t?Object(Fe.jsxs)("section",{className:"flex items-center",children:[Object(Fe.jsxs)(Ce.b,{to:"/notif",className:"flex flex-col items-center mx-2 xs:mx-4 hover:opacity-50 select-none relative",children:[Object(Fe.jsx)(Ae.b,{className:" h-8 w-8"}),Object(Fe.jsx)("p",{className:"hidden sm:block",children:"notifications"}),f&&Object(Fe.jsxs)("div",{className:"absolute w-6 h-6 top-1/2 sm:top-1/3 left-full sm:left-2/3 transform -translate-x-1/2 -translate-y-1/2 rounded-full inline-block text-white bg-red-500 text-center",style:{lineHeight:"1.5rem"},children:[Object(Fe.jsx)("span",{className:"z-10 relative",children:f}),Object(Fe.jsx)("span",{className:"z-0 absolute bg-red-500 animate-ping w-6 h-6 top-0 left-0 rounded-full"})]})]}),Object(Fe.jsxs)(Ce.b,{to:"/matches",className:"flex flex-col items-center mx-2 xs:mx-4 hover:opacity-50 select-none relative",children:[Object(Fe.jsx)(Ae.c,{className:" h-8 w-8"}),Object(Fe.jsx)("p",{className:"hidden sm:block",children:"matches"}),u&&Object(Fe.jsxs)("div",{className:"absolute w-6 h-6 top-1/2 sm:top-1/3 left-full sm:left-2/3 sm:ml-2 transform -translate-x-1/2 -translate-y-1/2 rounded-full inline-block text-white bg-red-500 text-center",style:{lineHeight:"1.5rem"},children:[Object(Fe.jsx)("span",{className:"z-10 relative",children:u}),Object(Fe.jsx)("span",{className:"z-0 absolute bg-red-500 animate-ping w-6 h-6 top-0 left-0 rounded-full"})]})]}),Object(Fe.jsxs)(Ce.b,{to:"/profile",className:"flex flex-col items-center mx-2 xs:mx-4 hover:opacity-50 select-none",children:[Object(Fe.jsx)(Ae.g,{className:" h-8 w-8"}),Object(Fe.jsx)("p",{className:"hidden sm:block",children:"profile"})]}),Object(Fe.jsxs)("section",{className:"flex flex-col items-center ml-2 xs:ml-4 hover:opacity-50 cursor-pointer select-none",onClick:function(){return F.logout()},children:[Object(Fe.jsx)(De.h,{className:" h-8 w-8"}),Object(Fe.jsx)("p",{className:"hidden sm:block",children:"logout"})]})]}):Object(Fe.jsxs)("section",{className:"flex items-center",children:[Object(Fe.jsxs)(Ce.b,{to:"/signup",className:"flex flex-col items-center mx-2 xs:mx-4 hover:opacity-50",children:[Object(Fe.jsx)(Ae.f,{className:" h-8 w-8 mx-2"}),Object(Fe.jsx)("p",{className:"",children:"signup"})]}),Object(Fe.jsxs)(Ce.b,{to:"/login",className:"flex flex-col items-center ml-2 xs:ml-4 hover:opacity-50",children:[Object(Fe.jsx)(De.g,{className:" h-8 w-8 mx-2"}),Object(Fe.jsx)("p",{className:"",children:"login"})]})]})]})})},Be=function(){return Object(Fe.jsx)("footer",{className:"h-16 w-full flex flex-col justify-center items-center",children:Object(Fe.jsxs)("div",{className:"flex flex-row text-center justify-center flex-wrap select-none",children:[Object(Fe.jsx)("span",{children:"Made at\xa0"}),Object(Fe.jsxs)("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{height:32,width:121},children:[Object(Fe.jsx)("path",{d:"M115.89,13.7H97.74v-.06C98,9.89,101.46,6,106.81,6c5.1-.1,8.81,3.86,9.07, 7.62Zm.94-8A14.46,14.46,0,0,0,96.58,6a14.39,14.39,0,0,0-4.07,10.11,14.19,14.19, 0,0,0,14.35,14.3,13.71,13.71,0,0,0,7.72-2.29A14.75,14.75,0,0,0,120,21.45h-5.27a8.53,8.53, 0,0,1-7.9,4.61c-4.28,0-9-2.93-9.22-8.36v-.07h23.28A14.51,14.51,0,0,0,116.83,5.68Z"}),Object(Fe.jsx)("polygon",{points:"74.87 30.31 90.95 10.69 83.42 10.69 83.42 1.69 66.32 1.69 66.32 10.69 58.79 10.69 74.87 30.31"}),Object(Fe.jsx)("path",{d:"M51.59,21.74a.63.63,0,0,0,.82-.29l.06-.12,0-.07a.64.64,0,0,0,0-.07,1.64,1.64, 0,0,0-.07-1.61,2.15,2.15,0,0,0-1.89-.73c-.36,0-1.56.12-3.39.34h-.06c-1.62.16-2.66, 0-2.86-1.31-.16-1.11.06-1.84,4.43-2.54,4.93-.82,5.75.2,6.14.69l.14.17A6,6,0,0,1,56, 18.09a5.7,5.7,0,0,1,.33,1.47c0,.25,0,1.51,0,1.51a9.16,9.16,0,0,1-9.2,8.18,9.5,9.5,0,0, 1-9.47-9.13V4.36a1.7,1.7,0,0,1,1.68-1.61A1.61,1.61,0,0,1,41,4.36v9.7a.62.62,0,0,0,1.23, 0V11.68A1.71,1.71,0,0,1,44,10.16a2.77,2.77,0,0,1,3,2.4,9.74,9.74,0,0,1,.25,1.79A11, 11,0,0,0,45,15,1.77,1.77,0,0,0,44,13.46a.69.69,0,0,0-.76.21.5.5,0,0,0-.07.38.5.5,0,0,0, .21.3,1.15,1.15,0,0,1,.47.89,2.35,2.35,0,0,1,0,.47A2.4,2.4,0,0,0,43,18.06c.4,2.71,3.14, 2.44,4.18,2.34h.05c1.12-.13,2.91-.33,3.3-.33.57,0,.81.13.87.2s0,.26-.06.45a2.14,2.14,0,0, 1-.1.22.61.61,0,0,0,.31.81m3.52-7.15a5.14,5.14,0,0,0-2.75-.76c0-2-.27-3.44-1.28-4.49l-.18-.18a2.88, 2.88,0,0,1,1.92-.35h0a1.75,1.75,0,0,1,1.24.72c.76.94,1.14,2.82,1,5.06m-4.93-4.42c.74.77.91,1.93.94, 3.67a22.6,22.6,0,0,0-2.6.3,10.32,10.32,0,0,0-.28-1.88,4.24,4.24,0,0,0-1.51-2.49,2.06,2.06,0,0,1, 1.4-.53v0a3,3,0,0,1,2,.93m7.39,10.9c0-.33,0-1.11,0-1.11a6.45,6.45,0,0,0-.42-2.29,8.13,8.13,0,0, 0-.93-1.82c.14-1.18.43-5-1.21-7.07A3,3,0,0,0,53,7.6a3.75,3.75,0,0,0-3.1.85A3.77,3.77,0,0,0,48.13, 8a3.27,3.27,0,0,0-2.54,1.16A5.92,5.92,0,0,0,44.05,9a2.91,2.91,0,0,0-1.86.52V4.36a2.83,2.83,0,0, 0-2.85-2.83,2.9,2.9,0,0,0-2.92,2.83V19.8a10.79,10.79,0,0,0,10.7,10.67,10.39,10.39,0,0,0,10.45-9.4"}),Object(Fe.jsx)("path",{d:"M24.34,25.45H20.55V17.61H12.13v7.84H8.37V6.55h3.76v7.6h8.42V6.55h3.79ZM32.71, 16A16.18,16.18,0,0,0,16.36,0,16.18,16.18,0,0,0,0,16,16.18,16.18,0,0,0,16.36,32,16.18,16.18,0,0,0,32.71,16Z"})]}),Object(Fe.jsx)("span",{children:"\xa0by\xa0"}),Object(Fe.jsx)("a",{style:{color:"#3490dc"},target:"_blank",rel:"noreferrer",href:"https://github.com/pesonkim/matcha",children:"kpesonen"})]})})},Pe=function(e){return Object(Fe.jsxs)("div",{className:"flex flex-col justify-between min-h-screen w-full max-w-screen-lg mx-auto",children:[Object(Fe.jsx)(Me,{}),Object(Fe.jsx)("main",{className:"mt-20",children:e.children}),Object(Fe.jsx)(Be,{})]})},We=function(e){return Object(Fe.jsx)("div",{className:"max-w-screen-sm mx-auto px-2 ",children:Object(Fe.jsx)("div",{className:"flex flex-col justify-center mb-4 p-4 bg-white rounded ui-shadow",children:e.children})})},ze=function(e){var t=e.title;return Object(Fe.jsx)("h1",{className:"text-2xl sm:text-3xl text-center mb-4",children:t})},Ue=function(e){var t="";return e.errors&&(t=e.errors.includes("required")?"":e.errors),Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("label",{children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),e.errors&&Object(Fe.jsx)("label",{className:"text-red-500",children:" *"}),Object(Fe.jsx)("input",{name:e.name,type:e.type,style:{display:"block",borderWidth:"1px",borderColor:"#dae4e9",borderRadius:".25rem",width:"100%",padding:".75rem"},onBlur:e.onBlur,maxLength:"255"}),Object(Fe.jsx)("div",{className:"text-red-500 mb-4",children:t})]})},He=function(e){var t=Object(Ie.useState)(!1),n=Object(Le.a)(t,2),r=n[0],a=n[1],c="";return e.errors&&(c=e.errors.includes("required")?"":e.errors),Object(Fe.jsxs)("div",{children:[e.errors&&Object(Fe.jsx)("label",{className:"text-red-500",children:" *"}),Object(Fe.jsxs)("div",{className:"relative",children:[Object(Fe.jsx)("input",{name:"password",type:r?"text":"password",style:{display:"block",borderWidth:"1px",borderColor:"#dae4e9",borderRadius:".25rem",width:"100%",padding:".75rem"},onBlur:e.onBlur,maxLength:"255"}),Object(Fe.jsx)("button",{tabIndex:-1,style:{position:"absolute",top:15,right:15},onClick:function(e){e.preventDefault(),a(!r)},children:r?"Hide":"Show"})]}),Object(Fe.jsx)("div",{className:"text-red-500 mb-4",children:c})]})},Ye=function(e){return Object(Fe.jsx)("button",{type:"submit",style:{width:"100%",color:"#fff",padding:".75rem",marginTop:".25rem",marginBottom:"1rem"},className:"rounded bg-green-500 hover:bg-green-600",children:e.text})},Ge=function(){var e=Object(c.c)((function(e){return e.user})).ip,t=Object(c.c)((function(e){return e.form})).errorMessage,n=Object(c.c)((function(e){return e.form})).notification,r=Object(c.b)();Object(Ie.useEffect)((function(){var e;"/verify/"===window.location.pathname?r((e="Account verified. You can now access Matcha",function(t){t({type:"NOTIF",data:e})})):"/expired/"===window.location.pathname?r(D("Your session has expired, please login again")):r((function(e){e({type:"CLEAR"})}))}),[]);return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"Login"}),n&&Object(Fe.jsx)("div",{className:"mb-4 text-center text-green-500",children:n}),t&&Object(Fe.jsx)("div",{className:"mb-4 text-center text-red-500",children:t}),Object(Fe.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n,a={username:t.target.username.value,password:t.target.password.value,ip:e};r((n=a,function(){var e=Object(d.a)(u.a.mark((function e(t){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F.login(n);case 3:r=e.sent,t({type:"LOGIN",data:r}),t({type:"CLEAR"}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),r=e.t0.response&&e.t0.response.data?e.t0.response.data.error:"Database error",t({type:"ERROR",data:r});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(Fe.jsx)(Ue,{type:"text",name:"username"}),Object(Fe.jsx)("label",{children:"Password"}),Object(Fe.jsx)(He,{}),Object(Fe.jsx)(Ye,{text:"Login"})]}),Object(Fe.jsx)("div",{className:"text-center",children:Object(Fe.jsx)(Ce.b,{to:"/forgot",style:{color:"#3490dc"},children:"Forgot password?"})})]}),Object(Fe.jsx)(We,{children:Object(Fe.jsxs)("div",{className:"text-center",children:["Don't have an account?",Object(Fe.jsx)(Ce.b,{to:"/signup",style:{color:"#3490dc"},children:"\xa0Signup"})]})})]})},Ve=n(29),_e=n(197),Ke=n.n(_e),qe=function(e){var t={};(e.firstname||(t.firstname="First name is required"),e.lastname||(t.lastname="Last name is required"),e.username?(e.username.length<3||e.username.length>20)&&(t.username="Username must be between 3 and 20 characters long"):t.username="Username is required",e.birthdate)&&(Object.values(e.birthdate.split("-")).includes("")&&(t.birthdate="Birthdate is required"),Ke()(e.birthdate,"YYYY-MM-DD").isValid()||(t.birthdate="This is not a valid date"));return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Email is required",e.password?e.password.length<6?t.password="Password must be at least 6 characters long":new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])").test(e.password)||(t.password="Password must contain at least one lowercase and uppercase letter, and a number."):t.password="Password is required",t},Ze=function(){var e=Object(Ie.useState)({}),t=Object(Le.a)(e,2),n=t[0],r=t[1],a=Object(Ie.useState)(""),c=Object(Le.a)(a,2),s=c[0],i=c[1],o=Object(Ie.useState)(""),l=Object(Le.a)(o,2),u=l[0],d=l[1],b={borderWidth:"1px",borderColor:"#dae4e9",borderRadius:".25rem",padding:".75rem",width:"100%"},f=function(e,t){for(var n=[],r=t;r>=e;r-=1)n.push(Object(Fe.jsx)("option",{children:r},r));return n},x=function(e){var t=e.target.name,a=e.target.value,c=qe(Object(Ve.a)({},t,a));c[t]?r(Object(j.a)(Object(j.a)({},n),{},Object(Ve.a)({},t,c[t]))):r(Object(j.a)(Object(j.a)({},n),{},Object(Ve.a)({},t,"")))};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"Signup"}),s&&Object(Fe.jsx)("label",{className:"text-red-500 text-center mb-2",children:s}),u&&Object(Fe.jsx)("label",{className:"text-green-500 text-center mb-2",children:u}),Object(Fe.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=function(){return Math.random().toString(36).substr(2)},n=t()+t()+t(),a={firstname:e.target.firstname.value,lastname:e.target.lastname.value,birthdate:"".concat(e.target.year.value,"-").concat(e.target.month.value,"-").concat(e.target.day.value),username:e.target.username.value,email:e.target.email.value,password:e.target.password.value,token:n},c=qe(a);r(c),0===Object.keys(c).length&&y.createUser(a).then((function(){i(""),d("Signup succesful, please check your email"),e.target.remove()})).catch((function(e){e.response&&e.response.data?i(e.response.data.error):i("Database error")}))},children:[Object(Fe.jsxs)("div",{className:"flex mb-4",children:[Object(Fe.jsxs)("div",{className:"inline-block mr-2 w-1/2",children:[Object(Fe.jsx)("label",{children:"First name"}),n.firstname&&Object(Fe.jsx)("label",{className:"text-red-500",children:" *"}),Object(Fe.jsx)("input",{name:"firstname",type:"text",style:b,onBlur:x,maxLength:"50"})]}),Object(Fe.jsxs)("div",{className:"inline-block ml-2 w-1/2",children:[Object(Fe.jsx)("label",{children:"Last name"}),n.lastname&&Object(Fe.jsx)("label",{className:"text-red-500",children:" *"}),Object(Fe.jsx)("input",{name:"lastname",type:"text",style:b,onBlur:x,maxLength:"50"})]})]}),Object(Fe.jsx)(Ue,{type:"text",name:"username",errors:n.username,onBlur:x}),Object(Fe.jsx)("label",{children:"Birthdate"}),n.birthdate&&Object(Fe.jsx)("label",{className:"text-red-500",children:" *"}),Object(Fe.jsxs)("div",{className:"flex mt-2",children:[Object(Fe.jsxs)("div",{className:"inline-block w-1/4",children:[Object(Fe.jsx)("label",{children:"Day"}),Object(Fe.jsxs)("select",{name:"day",type:"text",style:b,children:[Object(Fe.jsx)("option",{}),f(1,31)]})]}),Object(Fe.jsxs)("div",{className:"inline-block w-1/4 mx-4",children:[Object(Fe.jsx)("label",{children:"Month"}),Object(Fe.jsxs)("select",{name:"month",type:"text",style:b,children:[Object(Fe.jsx)("option",{}),f(1,12)]})]}),Object(Fe.jsxs)("div",{className:"inline-block w-1/2",children:[Object(Fe.jsx)("label",{children:"Year"}),Object(Fe.jsxs)("select",{name:"year",type:"text",style:b,children:[Object(Fe.jsx)("option",{}),f(1900,2010)]})]})]}),Object(Fe.jsx)("div",{className:"text-red-500 mb-4",children:n.birthdate}),Object(Fe.jsx)(Ue,{type:"text",name:"email",errors:n.email,onBlur:x}),Object(Fe.jsx)("label",{children:"Password"}),Object(Fe.jsx)(He,{errors:n.password,onBlur:x}),Object(Fe.jsx)(Ye,{text:"Create account"})]})]}),Object(Fe.jsx)(We,{children:Object(Fe.jsxs)("div",{className:"text-center",children:["Have an account?",Object(Fe.jsx)(Ce.b,{to:"/login",style:{color:"#3490dc"},children:"\xa0Login"})]})})]})},Je=function(){var e=Object(c.c)((function(e){return e.form})).errorMessage,t=Object(c.c)((function(e){return e.form})).notification,n=Object(c.b)();Object(Ie.useEffect)((function(){n((function(e){e({type:"CLEAR"})}))}),[]);return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"Forgot your password?"}),t&&Object(Fe.jsx)("div",{className:"mb-4 text-center text-green-500",children:t}),""===t?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.email.value,r=qe({email:t});r.email?n(D(r.email)):n(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.forgot(e);case 3:r=t.sent,n({type:"NOTIF",data:r.message}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}({email:t}))},children:[Object(Fe.jsxs)("p",{className:"mb-4",children:["Please enter the ",Object(Fe.jsx)("b",{children:"email address"})," associated with your account to receive a link to reset your password."]}),Object(Fe.jsx)("input",{name:"email",type:"text",style:{borderWidth:"1px",borderColor:"#dae4e9",borderRadius:".25rem",padding:".75rem",width:"100%"}}),Object(Fe.jsx)("div",{className:"text-red-500 mb-4",children:e}),Object(Fe.jsx)(Ye,{text:"Send password reset email"})]}),Object(Fe.jsx)("div",{className:"text-center",children:Object(Fe.jsx)(Ce.b,{to:"/login",style:{color:"#3490dc"},children:"Back to login"})})]}):Object(Fe.jsx)("div",{className:"text-center",children:Object(Fe.jsx)(Ce.b,{to:"/login",style:{color:"#3490dc"},children:"Back to login"})})]}),Object(Fe.jsx)(We,{children:Object(Fe.jsxs)("div",{className:"text-center",children:["Don't have an account?",Object(Fe.jsx)(Ce.b,{to:"/signup",style:{color:"#3490dc"},children:"\xa0Signup"})]})})]})},Qe=function(e){var t=e.user,n=Object(c.c)((function(e){return e.user})),r=n.latitude,a=n.longitude,s=Object(c.c)((function(e){return e.match})),i=s.publicLikes,o=s.matches,l=s.likes,u=i.find((function(e){return e.sender===t.id})),d=l.find((function(e){return e.receiver===t.id})),j=o.find((function(e){return e.id===t.id}));return Object(Fe.jsxs)("div",{className:"flex flex-col  justify-center p-4 bg-white rounded ui-shadow slideDown",children:[Object(Fe.jsxs)("section",{className:"flex items-center mb-2",children:[t.online?Object(Fe.jsx)("span",{className:"text-green-500",children:"\u25cf\xa0"}):Object(Fe.jsx)("span",{className:"text-red-500",children:"\u25cf\xa0"}),Object(Fe.jsx)("span",{className:"truncate text-xl",children:t.firstname}),",",Object(Fe.jsx)("span",{className:"ml-2 text-xl",children:t.age})]}),Object(Fe.jsxs)("div",{style:{height:"200px",maxHeight:"100%",width:"100%",display:"flex",justifyContent:"center",overflow:"hidden",backgroundColor:"rgba(248,247,251,255)",position:"relative"},children:[Object(Fe.jsx)("img",{src:t.avatar?t.avatar:"https://villagesonmacarthur.com/wp-content/uploads/2020/12/Blank-Avatar.png",alt:"avatar",style:{objectFit:"contain",height:"auto",width:"100%",maxHeight:"100%",maxWidth:"100%",margin:"auto"}}),Object(Fe.jsx)("div",{className:"absolute bottom-2 right-2 bg-white rounded-full shadow ",children:j?Object(Fe.jsxs)("div",{className:"flex flex-row items-center p-1",children:[Object(Fe.jsx)(Ae.e,{className:"h-6 w-6 text-pink-500"}),Object(Fe.jsx)("span",{children:"match"})]}):d?Object(Fe.jsxs)("div",{className:"flex flex-row items-center p-1",children:[Object(Fe.jsx)(De.e,{className:"h-6 w-6 text-pink-500"}),Object(Fe.jsx)("span",{children:"liked"})]}):u?Object(Fe.jsxs)("div",{className:"flex flex-row items-center p-1",children:[Object(Fe.jsx)(De.e,{className:"h-6 w-6 text-pink-500"}),Object(Fe.jsx)("span",{children:"likes you"})]}):null})]}),Object(Fe.jsxs)("section",{className:"flex justify-between items-center mt-2 mb-2",children:[Object(Fe.jsxs)("section",{className:"flex",children:[Object(Fe.jsx)(De.f,{className:" h-5 w-5 mr-1"}),function(){var e=t.latitude,n=t.longitude,c=Object(_.getDistance)({latitude:e,longitude:n},{latitude:r,longitude:a}),s=Math.ceil(Object(_.convertDistance)(c,"km"));return Object(Fe.jsx)("span",{className:"text-gray-600",children:"\n\t\t\t".concat(s," km away\n\t\t\t")})}()]}),Object(Fe.jsxs)("section",{className:"flex ",children:[Object(Fe.jsx)(De.d,{className:" h-5 w-5 mr-1"}),Object(Fe.jsx)("span",{className:" text-gray-600",children:t.fame})]})]}),Object(Fe.jsxs)("span",{className:"text-sm mb-2",children:[t.gender," looking for ",t.orientation.join(", ")]}),Object(Fe.jsx)("span",{className:"text-sm",children:t.tags.join(" ")})]})},$e=n(47),Xe=function(){var e=Object(c.c)((function(e){return e.public})),t=e.allTags,n=e.filterTags,r=Object(c.b)();Object(Ie.useEffect)((function(){r(Q())}),[]);return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("label",{className:"",children:"Tags"}),Object(Fe.jsx)($e.a,{isMulti:!0,name:"tags",placeholder:"Select...",value:n?n.map((function(e){return{value:e,label:e}})):[],options:t?t.map((function(e){return{value:e,label:e}})):[],onChange:function(e){var t=Array.isArray(e)?e.map((function(e){return("#"!==e.value.substr(0,1)?"#":"")+e.value})):[];r({type:"SETFILTERTAGS",data:t})},className:"mb-4"})]})},et=function(){var e=Object(c.c)((function(e){return e.public})),t=e.sortFilter,n=e.ids,r=Object(c.b)(),a=[{value:"tags in common",label:"tags in common"},{value:"distance (ascending)",label:"distance (ascending)"},{value:"distance (descending)",label:"distance (descending)"},{value:"fame (ascending)",label:"fame (ascending)"},{value:"fame (descending)",label:"fame (descending)"},{value:"age (ascending)",label:"age (ascending)"},{value:"age (descending)",label:"age (descending)"}],s=function(){return t?{value:t,label:t}:a[0]};Object(Ie.useEffect)((function(){n&&!t&&r({type:"SETSORT",data:{sortFilter:s().value}})}),[n]);return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("label",{className:"",children:"Sort by"}),Object(Fe.jsx)($e.a,{name:"sort",value:s(),onChange:function(e){r({type:"SETSORT",data:{sortFilter:e.value}})},options:a,className:"mb-4"})]})},tt=n(51),nt=n(27),rt=function(){var e=Object(c.c)((function(e){return e.public})).filterSliders,t=Object(Ie.useState)(e?[e.distance]:[500]),n=Object(Le.a)(t,2),r=n[0],a=n[1],s=Object(Ie.useState)(e?[e.age[0],e.age[1]]:[16,100]),i=Object(Le.a)(s,2),o=i[0],l=i[1],u=Object(Ie.useState)(e?[e.fame[0],e.fame[1]]:[0,500]),d=Object(Le.a)(u,2),b=d[0],f=d[1],x=Object(c.b)();return Object(Fe.jsxs)("div",{children:[Object(Fe.jsx)("label",{className:"",children:"Distance difference"}),Object(Fe.jsx)("div",{className:"pt-6 mx-2",children:Object(Fe.jsx)(tt.Range,{values:r,step:1,min:1,max:500,onChange:function(e){return a(e)},onFinalChange:function(){x({type:"SETSLIDERS",data:Object(j.a)(Object(j.a)({},e),{},{distance:r})})},renderTrack:function(e){var t=e.props,n=e.children;return Object(Fe.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(j.a)(Object(j.a)({},t.style),{},{height:"14px",width:"100%",display:"flex"}),children:Object(Fe.jsx)("div",{ref:t.ref,style:{height:"14px",width:"100%",borderRadius:"6px",background:Object(tt.getTrackBackground)({values:r,colors:["#548BF4","#ccc"],min:1,max:500}),alignSelf:"center"},children:n})})},renderThumb:function(e){var t=e.props;return Object(Fe.jsx)("div",Object(j.a)(Object(j.a)({},t),{},{style:Object(j.a)(Object(j.a)({},t.style),{},{height:"25px",width:"25px",borderRadius:"50%",backgroundColor:"#fff",alignItems:"center",boxShadow:"0px 2px 6px #AAA"}),className:"focus:outline-none","data-tip":!0,"data-for":"distanceSlider",children:Object(Fe.jsx)(nt.a,{id:"distanceSlider",children:r[0]+"\xa0km"})}))}})}),Object(Fe.jsxs)("div",{className:"flex flex-row justify-between pt-4",children:[Object(Fe.jsx)("label",{className:"",children:"Min age"}),Object(Fe.jsx)("label",{className:"",children:"Max age"})]}),Object(Fe.jsx)("div",{className:"pt-6 mx-2",children:Object(Fe.jsx)(tt.Range,{allowOverlap:!0,values:o,step:1,min:16,max:100,onChange:function(e){return l(e)},onFinalChange:function(){x({type:"SETSLIDERS",data:Object(j.a)(Object(j.a)({},e),{},{age:o.sort((function(e,t){return e-t}))})})},renderTrack:function(e){var t=e.props,n=e.children;return Object(Fe.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(j.a)(Object(j.a)({},t.style),{},{height:"14px",width:"100%",display:"flex"}),children:Object(Fe.jsx)("div",{ref:t.ref,style:{height:"14px",width:"100%",borderRadius:"6px",background:Object(tt.getTrackBackground)({values:o,colors:["#ccc","#548BF4","#ccc"],min:16,max:100}),alignSelf:"center"},children:n})})},renderThumb:function(e){var t=e.index,n=e.props;return Object(Fe.jsx)("div",Object(j.a)(Object(j.a)({},n),{},{style:Object(j.a)(Object(j.a)({},n.style),{},{height:"25px",width:"25px",borderRadius:"50%",backgroundColor:"#fff",alignItems:"center",boxShadow:"0px 2px 6px #AAA"}),className:"focus:outline-none","data-tip":!0,"data-for":"ageSlider".concat(t),children:Object(Fe.jsx)(nt.a,{id:"ageSlider".concat(t),children:o[t]})}))}})}),Object(Fe.jsxs)("div",{className:"flex flex-row justify-between pt-4",children:[Object(Fe.jsx)("label",{className:"",children:"Min fame"}),Object(Fe.jsx)("label",{className:"",children:"Max fame"})]}),Object(Fe.jsx)("div",{className:"pt-6 mx-2 pb-4",children:Object(Fe.jsx)(tt.Range,{allowOverlap:!0,values:b,step:1,min:0,max:500,onChange:function(e){return f(e)},onFinalChange:function(){x({type:"SETSLIDERS",data:Object(j.a)(Object(j.a)({},e),{},{fame:b.sort((function(e,t){return e-t}))})})},renderTrack:function(e){var t=e.props,n=e.children;return Object(Fe.jsx)("div",{onMouseDown:t.onMouseDown,onTouchStart:t.onTouchStart,style:Object(j.a)(Object(j.a)({},t.style),{},{height:"14px",width:"100%",display:"flex"}),children:Object(Fe.jsx)("div",{ref:t.ref,style:{height:"14px",width:"100%",borderRadius:"6px",background:Object(tt.getTrackBackground)({values:b,colors:["#ccc","#548BF4","#ccc"],min:0,max:500}),alignSelf:"center"},children:n})})},renderThumb:function(e){var t=e.index,n=e.props;return Object(Fe.jsx)("div",Object(j.a)(Object(j.a)({},n),{},{style:Object(j.a)(Object(j.a)({},n.style),{},{height:"25px",width:"25px",borderRadius:"50%",backgroundColor:"#fff",alignItems:"center",boxShadow:"0px 2px 6px #AAA"}),className:"focus:outline-none","data-tip":!0,"data-for":"fameSlider".concat(t),children:Object(Fe.jsx)(nt.a,{id:"fameSlider".concat(t),children:0===b[t]?"0":b[t]})}))}})}),Object(Fe.jsx)("div",{className:"justify-center flex pt-4",style:{width:"100%",color:"#fff",padding:".75rem",marginTop:".25rem"},children:Object(Fe.jsx)("button",{className:"rounded bg-green-500 hover:bg-green-600 text-white ml-2 p-2",onClick:function(){a([500]),l([16,100]),f([0,500]),x({type:"RESETFILTERS"})},children:"Reset filters"})})]})},at=function(e){var t=Object(Ie.useState)(!1),n=Object(Le.a)(t,2),r=n[0],a=n[1],c={display:r?"":"none"};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("div",{className:"flex justify-between items-center",children:[Object(Fe.jsx)("p",{className:"",children:e.text||""}),Object(Fe.jsx)("button",{tabIndex:-1,onClick:function(e){e.preventDefault(),a(!r)},children:r?Object(Fe.jsx)(De.b,{className:"w-8 h-8"}):Object(Fe.jsx)(De.a,{className:"w-8 h-8"})})]}),Object(Fe.jsx)("div",{style:c,className:"mt-2",children:e.children})]})},ct=function(){var e=Object(c.c)((function(e){return e.public})).users,t=Object(c.c)((function(e){return e.match})).blocks;return Object(Fe.jsxs)(We,{children:[Object(Fe.jsxs)("div",{"data-tip":!0,"data-for":"results",children:[Object(Fe.jsx)("h1",{className:"text-2xl sm:text-3xl text-center mb-4",children:"View users: ".concat(e.length)}),Object(Fe.jsx)(nt.a,{id:"results",children:"total: ".concat(e.length,", blocks: ").concat(t?t.length:null)})]}),Object(Fe.jsx)(et,{}),Object(Fe.jsx)("hr",{className:"my-2"}),Object(Fe.jsxs)(at,{text:"User filters",children:[Object(Fe.jsx)(Xe,{}),Object(Fe.jsx)(rt,{})]})]})},st=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.user})),n=t.tags,r=t.latitude,a=t.longitude,s=Object(c.c)((function(e){return e.public})),i=s.ids,o=s.users,l=s.sortFilter,j=s.filterTags,b=s.filterSliders,f=s.loadingUsers,x=Object(c.c)((function(e){return e.match})).blocks;return Object(Ie.useEffect)(Object(d.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l||!x){t.next=4;break}return t.next=3,e(q(j,b,l,n,r,a,x));case 3:e({type:"LOADINGUSERS",data:!1});case 4:case"end":return t.stop()}}),t)}))),[i,l,j,b,x]),Object(Ie.useEffect)((function(){return function(){e({type:"LOADINGUSERS",data:!0})}}),[]),Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)(ct,{}),f?Object(Fe.jsx)(We,{children:Object(Fe.jsx)("div",{className:"text-center",children:"Loading users..."})}):null,o.length?Object(Fe.jsx)("div",{className:"w-full max-w-screen-lg grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 sm:gap-2 md:gap-3 lg:gap-5 mx-auto my-4 px-2",children:o.map((function(e){return Object(Fe.jsx)(Ce.b,{to:"/browse/".concat(e.id),children:Object(Fe.jsx)(Qe,{user:e})},e.id)}))}):f?null:Object(Fe.jsx)(We,{children:Object(Fe.jsx)("div",{className:"text-center",children:"No users match current filters or location"})})]})},it=function(e){var t=e.online,n=e.firstname,r=e.age,a=Object(Te.g)();return Object(Fe.jsxs)("div",{className:"w-full flex items-center justify-between p-4",children:[Object(Fe.jsxs)("section",{className:"flex items-center overflow-hidden w-2/3",children:[t?Object(Fe.jsx)("span",{className:"text-green-500",children:"\u25cf\xa0"}):Object(Fe.jsx)("span",{className:"text-red-500",children:"\u25cf\xa0"}),Object(Fe.jsx)("span",{className:"truncate text-2xl",children:n}),",",Object(Fe.jsx)("span",{className:"ml-2 text-2xl",children:r})]}),Object(Fe.jsxs)("section",{className:"flex items-center cursor-pointer select-none",onClick:function(){return a.goBack()},children:[Object(Fe.jsx)("span",{className:"sm:block hidden",children:"Back to browse"}),Object(Fe.jsx)(De.j,{className:"ml-2 h-8 w-8"})]})]})},ot=function(e){var t=e.image,n=e.status;return Object(Fe.jsxs)("div",{style:{height:"300px",maxHeight:"100%",width:"100%",display:"flex",justifyContent:"center",overflow:"hidden",backgroundColor:"rgba(248,247,251,255)",position:"relative"},children:[Object(Fe.jsx)("img",{src:t||"https://villagesonmacarthur.com/wp-content/uploads/2020/12/Blank-Avatar.png",alt:"avatar",style:{objectFit:"contain",height:"auto",width:"100%",maxHeight:"100%",maxWidth:"100%",margin:"auto"}}),n&&Object(Fe.jsx)("div",{className:"absolute bottom-2 right-2 bg-white rounded-full shadow ",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center p-1",children:["match"===n?Object(Fe.jsx)(Ae.e,{className:"h-6 w-6 text-pink-500"}):Object(Fe.jsx)(De.e,{className:"h-6 w-6 text-pink-500"}),Object(Fe.jsx)("span",{children:n})]})})]})},lt=n(56),ut=function(e){var t=e.name,n=e.fame,r=e.age,a=e.lat,s=e.lng,i=e.gender,o=e.orientation,l=e.bio,u=e.tags,d=e.online,j=e.login,b=Object(c.c)((function(e){return e.user})),f=b.latitude,x=b.longitude,p={borderBottomWidth:"1px",borderColor:"#dae4e9"};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("div",{className:"w-full flex flex-col p-4",style:p,children:[Object(Fe.jsxs)("section",{className:"flex justify-between items-center",children:[Object(Fe.jsx)("strong",{className:"break-words overflow-hidden text-xl",children:t}),Object(Fe.jsx)("strong",{className:"text-xl",children:r})]}),Object(Fe.jsxs)("section",{className:"flex justify-between items-center mt-2 mb-4",children:[Object(Fe.jsxs)("section",{className:"flex","data-tip":!0,"data-for":"hoverImage",children:[Object(Fe.jsx)(De.f,{className:"h-6 w-6 mr-1"}),function(){var e=Object(_.getDistance)({latitude:a,longitude:s},{latitude:f,longitude:x}),t=Math.ceil(Object(_.convertDistance)(e,"km"));return Object(Fe.jsx)("span",{className:"text-lg text-gray-600",children:"\n\t\t\t".concat(t," km away\n\t\t\t")})}(),Object(Fe.jsx)(nt.a,{id:"hoverImage",children:Object(Fe.jsx)("div",{style:{height:"100%",maxHeight:"400px",width:"auto",display:"flex",justifyContent:"center",overflow:"hidden"},children:Object(Fe.jsx)("img",{src:"https://maps.googleapis.com/maps/api/staticmap?size=500x400&zoom=4&markers=size:normal%7C".concat(a,",").concat(s,"&key=").concat("AIzaSyCWW5QELk9CsQ0uY-Y8dTAC8j54u9PZeHk"),style:{objectFit:"contain",height:"auto",width:"100%",maxHeight:"100%",maxWidth:"100%",margin:"auto"},alt:"location"})})})]}),Object(Fe.jsxs)("section",{className:"flex ",children:[Object(Fe.jsx)(De.d,{className:"h-6 w-6 mr-1"}),Object(Fe.jsx)("span",{className:"text-lg text-gray-600",children:n})]})]}),Object(Fe.jsx)("p",{className:"break-words",children:l})]}),Object(Fe.jsx)("div",{className:"w-full flex items-center p-4",style:p,children:Object(Fe.jsxs)("p",{children:[i," looking for ",o.join(", ")]})}),Object(Fe.jsx)("div",{className:"w-full flex items-center p-4",style:p,children:Object(Fe.jsx)("p",{children:u.join(" ")})}),Object(Fe.jsx)("div",{className:"w-full flex items-center p-4",style:p,children:d?Object(Fe.jsx)("p",{children:"online"}):Object(Fe.jsxs)("p",{children:["last online ",Object(Fe.jsx)(lt.a,{date:j,live:!1})]})})]})},dt=function(e){var t=e.user,n=e.onClick,r=e.action;return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none cursor-pointer hover:underline text-gray-800",onClick:function(){return n({type:"report",user:t,action:r})},children:[Object(Fe.jsx)(Ae.d,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Report"})]})})},jt=function(){return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none text-gray-500","data-tip":"You have already reported this user",children:[Object(Fe.jsx)(Ae.d,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Report"}),Object(Fe.jsx)(nt.a,{})]})})},bt=function(e){var t=e.user,n=e.onClick,r=e.action;return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none cursor-pointer hover:underline text-gray-800",onClick:function(){return n({type:"block",user:t,action:r})},children:[Object(Fe.jsx)(Ae.a,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Block"})]})})},ft=function(e){var t=e.user,n=e.action,r=e.setModal,a=e.id;return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none cursor-pointer hover:underline text-pink-500 ",onClick:function(){return r({type:"unlike",user:t,action:n,likeid:a})},children:[Object(Fe.jsx)(Ae.e,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Unlike"})]})})},xt=function(e){var t=e.onClick;return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none cursor-pointer hover:underline text-gray-800 hover:text-pink-500 transition duration-500 ease-in-out",onClick:function(){return t({type:"new"})},children:[Object(Fe.jsx)(Ae.e,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Like"})]})})},pt=function(){return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none text-gray-500","data-tip":"Your profile needs an avatar before you can leave likes",children:[Object(Fe.jsx)(Ae.e,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Like"}),Object(Fe.jsx)(nt.a,{})]})})},mt=function(e){var t=e.user,n=e.handleLike,r=e.askConfirm,a=e.setModal,s=e.handleReport,i=e.handleBlock,o=Object(c.c)((function(e){return e.user})).avatar,l=Object(c.c)((function(e){return e.public})).profile,u=Object(c.c)((function(e){return e.match})),d=u.reports,j=u.likes,b=!!d.find((function(e){return e.receiver===l.id})),f=j.find((function(e){return e.receiver===l.id}));return Object(Fe.jsxs)("div",{className:"w-full flex sm:px-4",children:[o?f?Object(Fe.jsx)(ft,{user:t,action:n,setModal:a,id:f.id}):Object(Fe.jsx)(xt,{onClick:n}):Object(Fe.jsx)(pt,{}),b?Object(Fe.jsx)(jt,{}):Object(Fe.jsx)(dt,{user:t.firstname,onClick:r,action:s}),Object(Fe.jsx)(bt,{user:t.firstname,onClick:r,action:i})]})},ht=function(e){var t=e.dialog,n=e.setDialog,r=function(e){"confirmContainer"===e.target.id&&n(null)};return Object(Ie.useEffect)((function(){if(t&&n)return window.addEventListener("click",r),function(){window.removeEventListener("click",r)}}),[t]),t?Object(Fe.jsxs)("div",{className:t?"block":"hidden",children:[Object(Fe.jsx)("div",{className:"fixed z-0 inset-0 bg-black opacity-30"}),Object(Fe.jsx)("div",{className:"fixed inset-0 flex items-center justify-center slideDown",id:"confirmContainer",children:Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"report"===t.type?"Report":"Block"}),"block"===t.type&&Object(Fe.jsx)("p",{className:"mb-4",children:"Blocked users will not appear in any of your search results or notifications."}),Object(Fe.jsxs)("p",{className:"mb-4",children:["Are you sure you want to ",t.type," user ",t.user,"?"]}),Object(Fe.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(Fe.jsx)("button",{className:"rounded bg-green-500 hover:bg-green-600 text-white mr-2 p-4 w-1/2",onClick:function(){return t.action()},children:"Confirm"}),Object(Fe.jsx)("button",{className:"rounded bg-green-500 hover:bg-green-600 text-white ml-2 p-4 w-1/2",onClick:function(){return n(null)},children:"Cancel"})]})]})})]}):null},Ot=function(e){var t=e.modal,n=e.setModal,r=Object(c.c)((function(e){return e.match})).matches,a=function(e){"modalContainer"===e.target.id&&n(null)};return Object(Ie.useEffect)((function(){if(t&&n)return window.addEventListener("click",a),function(){window.removeEventListener("click",a)}}),[t]),t?Object(Fe.jsxs)("div",{className:t?"block":"hidden",children:[Object(Fe.jsx)("div",{className:"fixed z-0 inset-0 bg-black opacity-30"}),Object(Fe.jsxs)("div",{className:"fixed inset-0 flex items-center justify-center slideDown",id:"modalContainer",children:["unlike"===t.type&&Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"Unlike"}),r.find((function(e){return e.id===t.user.id}))?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("p",{className:"mb-4",children:["Are you sure you want to unlike ",t.user.firstname,"?"]}),Object(Fe.jsx)("p",{className:"mb-4",children:"This will also remove them from your matches."})]}):Object(Fe.jsxs)("p",{className:"mb-4",children:["Are you sure you want to unlike ",t.user.firstname,"?"]}),Object(Fe.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(Fe.jsx)("button",{className:"rounded bg-green-500 hover:bg-green-600 text-white mr-2 p-4 w-1/2",onClick:function(){return t.action({type:"remove",likeid:t.likeid})},children:"Confirm"}),Object(Fe.jsx)("button",{className:"rounded bg-green-500 hover:bg-green-600 text-white ml-2 p-4 w-1/2",onClick:function(){return n(null)},children:"Cancel"})]})]}),"match"===t.type&&Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"You got a match!"}),Object(Fe.jsxs)("p",{className:"mb-4 text-center",children:["You can now chat with ",t.user.firstname,"!"]}),Object(Fe.jsxs)("div",{className:"flex flex-row justify-between",children:[Object(Fe.jsx)(Ce.b,{to:"/matches",className:" w-1/2",children:Object(Fe.jsx)("button",{className:"rounded bg-green-500 hover:bg-green-600 text-white mr-4 p-4 w-full h-full",onClick:function(){return n(null)},children:"View matches"})}),Object(Fe.jsx)("button",{className:"rounded bg-green-500 hover:bg-green-600 text-white ml-4 p-4 w-1/2",onClick:function(){return n(null)},children:"Continue browsing"})]})]})]})]}):null},gt=function(e){var t=e.profileId,n=Object(c.b)(),r=Object(c.c)((function(e){return e.public})).profile,a=Object(c.c)((function(e){return e.user})).id,s=Object(c.c)((function(e){return e.match})),i=s.publicLikes,o=s.matches,l=s.likes,j=Object(Ie.useState)(null),b=Object(Le.a)(j,2),f=b[0],x=b[1],p=Object(Ie.useState)(null),m=Object(Le.a)(p,2),h=m[0],O=m[1],g=Object(Ie.useState)(!1),v=Object(Le.a)(g,2),w=v[0],y=v[1],k=i.find((function(e){return e.sender===t})),N=l.find((function(e){return e.receiver===t})),S=o.find((function(e){return e.id===t}));Object(Ie.useEffect)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(ge({from:a,to:t}));case 2:return e.next=4,n(Z(t));case 4:window.scroll({top:0,left:0,behavior:"smooth"});case 5:case"end":return e.stop()}}),e)}))),[n]),Object(Ie.useEffect)((function(){w&&(o.find((function(e){return e.id===t}))&&x({type:"match",user:r}),y(!1))}),[o]);var R=function(){var e=Object(d.a)(u.a.mark((function e(r){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.type,s=r.likeid,e.next=3,n(ve({from:a,to:t,type:c,id:s}));case 3:return"remove"===c&&x(null),e.next=6,n(Z(t));case 6:"new"===c&&y(!0);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(we({from:a,to:t}));case 2:return O(null),e.next=5,n(Z(t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(ye({from:a,to:t,type:"new"}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r?Object(Fe.jsx)("div",{className:"max-w-screen-sm mx-auto px-2 slideDown",children:Object(Fe.jsxs)("div",{className:"flex flex-col justify-center bg-white rounded ui-shadow",children:[Object(Fe.jsx)(it,{firstname:r.firstname,age:r.age,online:r.online}),Object(Fe.jsx)(ot,{image:r.avatar,status:S?"match":N?"liked":k?"likes you":null}),Object(Fe.jsx)(ut,{name:r.firstname+" "+r.lastname,age:r.age,fame:r.fame,lat:r.latitude,lng:r.longitude,gender:r.gender,orientation:r.orientation,bio:r.bio,tags:r.tags,online:r.online,login:r.last_login}),Object(Fe.jsx)(mt,{user:r,handleLike:R,askConfirm:O,setModal:x,handleReport:E,handleBlock:C}),Object(Fe.jsx)(ht,{dialog:h,setDialog:O}),Object(Fe.jsx)(Ot,{modal:f,setModal:x})]})}):Object(Fe.jsx)(We,{children:Object(Fe.jsx)("div",{className:"text-center",children:"Loading user profile..."})})},vt=function(e){var t=e.online,n=e.firstname,r=e.age,a=Object(Te.g)();return Object(Fe.jsxs)("div",{className:"w-full flex items-center justify-between p-4 overflow-hidden",children:[Object(Fe.jsxs)("section",{className:"flex items-center overflow-hidden w-2/3",children:[t?Object(Fe.jsx)("span",{className:"text-green-500",children:"\u25cf\xa0"}):Object(Fe.jsx)("span",{className:"text-red-500",children:"\u25cf\xa0"}),Object(Fe.jsx)("span",{className:"truncate text-2xl",children:n}),",",Object(Fe.jsx)("span",{className:"ml-2 text-2xl",children:r})]}),Object(Fe.jsxs)("section",{className:"flex items-center cursor-pointer select-none",onClick:function(){return a.goBack()},children:[Object(Fe.jsx)("span",{className:"sm:block hidden",children:"Back to browse"}),Object(Fe.jsx)(De.j,{className:"ml-2 h-8 w-8"})]})]})},wt=function(e){var t=e.image;return Object(Fe.jsxs)("div",{style:{height:"300px",maxHeight:"100%",width:"100%",display:"flex",justifyContent:"center",overflow:"hidden",backgroundColor:"rgba(248,247,251,255)",position:"relative"},children:[Object(Fe.jsx)("img",{src:t||"https://villagesonmacarthur.com/wp-content/uploads/2020/12/Blank-Avatar.png",alt:"avatar",style:{objectFit:"contain",height:"auto",width:"100%",maxHeight:"100%",maxWidth:"100%",margin:"auto"}}),Object(Fe.jsx)("div",{className:"absolute bottom-2 right-2 bg-white rounded-full shadow ",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center p-1",children:[Object(Fe.jsx)(Ae.e,{className:"h-6 w-6 text-pink-500"}),Object(Fe.jsx)("span",{children:"match"})]})})]})},yt=function(e){var t=e.name,n=e.fame,r=e.age,a=e.lat,s=e.lng,i=e.gender,o=e.orientation,l=e.bio,u=e.tags,d=e.online,j=e.login,b=Object(c.c)((function(e){return e.user})),f=b.latitude,x=b.longitude,p={borderBottomWidth:"1px",borderColor:"#dae4e9"};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("div",{className:"w-full flex flex-col p-4",style:p,children:[Object(Fe.jsxs)("section",{className:"flex justify-between items-center",children:[Object(Fe.jsx)("strong",{className:"break-words overflow-hidden text-xl",children:t}),Object(Fe.jsx)("strong",{className:"text-xl",children:r})]}),Object(Fe.jsxs)("section",{className:"flex justify-between items-center mt-2 mb-4",children:[Object(Fe.jsxs)("section",{className:"flex","data-tip":!0,"data-for":"hoverImage",children:[Object(Fe.jsx)(De.f,{className:"h-6 w-6 mr-1"}),function(){var e=Object(_.getDistance)({latitude:a,longitude:s},{latitude:f,longitude:x}),t=Math.ceil(Object(_.convertDistance)(e,"km"));return Object(Fe.jsx)("span",{className:"text-lg text-gray-600",children:"\n\t\t\t".concat(t," km away\n\t\t\t")})}(),Object(Fe.jsx)(nt.a,{id:"hoverImage",children:Object(Fe.jsx)("div",{style:{height:"100%",maxHeight:"400px",width:"auto",display:"flex",justifyContent:"center",overflow:"hidden"},children:Object(Fe.jsx)("img",{src:"https://maps.googleapis.com/maps/api/staticmap?size=500x400&zoom=4&markers=size:normal%7C".concat(a,",").concat(s,"&key=").concat("AIzaSyCWW5QELk9CsQ0uY-Y8dTAC8j54u9PZeHk"),style:{objectFit:"contain",height:"auto",width:"100%",maxHeight:"100%",maxWidth:"100%",margin:"auto"},alt:"location"})})})]}),Object(Fe.jsxs)("section",{className:"flex ",children:[Object(Fe.jsx)(De.d,{className:"h-6 w-6 mr-1"}),Object(Fe.jsx)("span",{className:"text-lg text-gray-600",children:n})]})]}),Object(Fe.jsx)("p",{className:"break-words",children:l})]}),Object(Fe.jsx)("div",{className:"w-full flex items-center p-4",style:p,children:Object(Fe.jsxs)("p",{children:[i," looking for ",o.join(", ")]})}),Object(Fe.jsx)("div",{className:"w-full flex items-center p-4",style:p,children:Object(Fe.jsx)("p",{children:u.join(" ")})}),Object(Fe.jsx)("div",{className:"w-full flex items-center p-4",style:p,children:d?Object(Fe.jsx)("p",{children:"online"}):Object(Fe.jsxs)("p",{children:["last online ",Object(Fe.jsx)(lt.a,{date:j,live:!1})]})})]})},kt=function(e){var t=e.user,n=e.onClick,r=e.action;return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none cursor-pointer hover:underline text-gray-800",onClick:function(){return n({type:"report",user:t,action:r})},children:[Object(Fe.jsx)(Ae.d,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Report"})]})})},Nt=function(){return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none text-gray-500","data-tip":"You have already reported this user",children:[Object(Fe.jsx)(Ae.d,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Report"}),Object(Fe.jsx)(nt.a,{})]})})},St=function(e){var t=e.user,n=e.onClick,r=e.action;return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none cursor-pointer hover:underline text-gray-800",onClick:function(){return n({type:"block",user:t,action:r})},children:[Object(Fe.jsx)(Ae.a,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Block"})]})})},Rt=function(e){var t=e.user,n=e.action,r=e.setModal,a=e.id;return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none cursor-pointer hover:underline text-pink-500 ",onClick:function(){return r({type:"unlike",user:t,action:n,likeid:a})},children:[Object(Fe.jsx)(Ae.e,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Unlike"})]})})},Et=function(e){var t=e.onClick;return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none cursor-pointer hover:underline text-gray-800 hover:text-pink-500 transition duration-500 ease-in-out",onClick:function(){return t({type:"new"})},children:[Object(Fe.jsx)(Ae.e,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Like"})]})})},Ct=function(){return Object(Fe.jsx)("div",{className:"flex-1 w-1/3",children:Object(Fe.jsxs)("div",{className:"flex flex-row items-center justify-center p-4 select-none text-gray-500","data-tip":"Your profile needs an avatar before you can leave likes",children:[Object(Fe.jsx)(Ae.e,{className:" h-8 w-8 mr-2"}),Object(Fe.jsx)("span",{children:"Like"}),Object(Fe.jsx)(nt.a,{})]})})},Tt=function(e){var t=e.user,n=e.handleLike,r=e.askConfirm,a=e.setModal,s=e.handleReport,i=e.handleBlock,o=Object(c.c)((function(e){return e.user})).avatar,l=Object(c.c)((function(e){return e.match})),u=l.reports,d=l.likes,j=!!u.find((function(e){return e.receiver===t.id})),b=d.find((function(e){return e.receiver===t.id}));return Object(Fe.jsxs)("div",{className:"w-full flex sm:px-4",children:[o?b?Object(Fe.jsx)(Rt,{user:t,action:n,setModal:a,id:b.id}):Object(Fe.jsx)(Et,{onClick:n}):Object(Fe.jsx)(Ct,{}),j?Object(Fe.jsx)(Nt,{}):Object(Fe.jsx)(kt,{user:t.firstname,onClick:r,action:s}),Object(Fe.jsx)(St,{user:t.firstname,onClick:r,action:i})]})},Lt=function(e){var t=e.profile,n=Object(c.b)(),r=Object(c.c)((function(e){return e.user})).id,a=Object(Ie.useState)(null),s=Object(Le.a)(a,2),i=s[0],o=s[1],l=Object(Ie.useState)(null),j=Object(Le.a)(l,2),b=j[0],f=j[1];Object(Ie.useEffect)((function(){window.scroll({top:0,left:0,behavior:"smooth"})}),[]);var x=function(){var e=Object(d.a)(u.a.mark((function e(a){var c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.type,s=a.likeid,e.next=3,n(ve({from:r,to:t.id,type:c,id:s}));case 3:"remove"===c&&o(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(we({from:r,to:t.id}));case 2:f(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(ye({from:r,to:t.id,type:"new"}));case 2:f(null);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return t?Object(Fe.jsx)("div",{className:"max-w-screen-sm mx-auto px-2 slideDown",children:Object(Fe.jsxs)("div",{className:"flex flex-col justify-center bg-white rounded ui-shadow",children:[Object(Fe.jsx)(vt,{firstname:t.firstname,age:t.age,online:t.online}),Object(Fe.jsx)(wt,{image:t.avatar}),Object(Fe.jsx)(yt,{name:t.firstname+" "+t.lastname,age:t.age,fame:t.fame,lat:t.latitude,lng:t.longitude,gender:t.gender,orientation:t.orientation,bio:t.bio,tags:t.tags,online:t.online,login:t.last_login}),Object(Fe.jsx)(Tt,{user:t,handleLike:x,askConfirm:f,setModal:o,handleReport:p,handleBlock:m}),Object(Fe.jsx)(ht,{dialog:b,setDialog:f}),Object(Fe.jsx)(Ot,{modal:i,setModal:o})]})}):Object(Fe.jsx)(We,{children:Object(Fe.jsx)("div",{className:"text-center",children:"Loading user profile..."})})},Dt=function(){var e=Object(c.c)((function(e){return e.form})).errorMessage,t=Object(c.c)((function(e){return e.form})).notification,n=Object(c.b)(),r=Object(Te.h)().token;return Object(Fe.jsx)(Fe.Fragment,{children:Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"Password reset"}),t&&Object(Fe.jsx)("div",{className:"mb-4 text-center text-green-500",children:t}),""===t?Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=e.target.password.value,a=qe({password:t});a.password?n(D(a.password)):n(function(e){return function(){var t=Object(d.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.reset(e);case 3:r=t.sent,n({type:"NOTIF",data:r.message}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),r=t.t0.response&&t.t0.response.data?t.t0.response.data.error:"Database error",n({type:"ERROR",data:r});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}({password:t,token:r}))},children:[Object(Fe.jsx)("label",{children:"Please enter a new password for your account"}),Object(Fe.jsx)(He,{}),Object(Fe.jsx)("div",{className:"text-red-500 mb-4",children:e}),Object(Fe.jsx)(Ye,{text:"Set new password"})]}),Object(Fe.jsx)("div",{className:"text-center",children:Object(Fe.jsx)(Ce.b,{to:"/login",style:{color:"#3490dc"},children:"Back to login"})})]}):Object(Fe.jsx)("div",{className:"text-center",children:Object(Fe.jsx)(Ce.b,{to:"/login",style:{color:"#3490dc"},children:"Back to login"})})]})})},At=n(54),It=function(){var e=Object(c.c)((function(e){return e.form})).photoStr,t=Object(c.b)(),n=function(){var e=Object(d.a)(u.a.mark((function e(n){var r,a,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),r=n.target.files[0],a={maxSizeMB:.5,maxWidthOrHeight:1920,useWebWorker:!0},r){e.next=7;break}return e.abrupt("return");case 7:if(!(r.size>1e6)){e.next=11;break}return t({type:"ERROR",data:"Max file size is 1Mb"}),n.target.value=null,e.abrupt("return");case 11:return e.prev=11,e.next=14,Object(At.a)(r,a);case 14:c=e.sent,s=URL.createObjectURL(c),t({type:"PREVIEW",data:s}),t({type:"CLEAR"}),e.next=24;break;case 20:e.prev=20,e.t0=e.catch(11),e.t0.target instanceof HTMLElement?t({type:"ERROR",data:"Not a valid image file"}):t({type:"ERROR",data:"Image upload failed"}),n.target.value=null;case 24:case"end":return e.stop()}}),e,null,[[11,20]])})));return function(t){return e.apply(this,arguments)}}();return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("div",{className:"mb-4 mx-auto",children:e&&Object(Fe.jsx)("img",{src:e,alt:"avatar",style:{width:"auto",height:"auto",maxWidth:"100%",maxHeight:"300px",margin:"auto"}})}),Object(Fe.jsx)("label",{children:"Profile picture"}),Object(Fe.jsx)("input",{name:"photo",type:"file",style:{display:"block",borderWidth:"1px",borderColor:"#dae4e9",borderRadius:".25rem",width:"100%",padding:".75rem",marginBottom:"1rem"},onChange:n,accept:".png, .jpg .jpeg"})]})},Ft=function(){var e=Object(c.c)((function(e){return e.form})).gender,t=Object(c.b)();return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("label",{children:"Gender"}),Object(Fe.jsx)($e.a,{name:"gender",value:e?{value:e,label:e}:"",onChange:function(e){t({type:"GENDER",data:{gender:e.value}})},options:[{value:"male",label:"male"},{value:"female",label:"female"},{value:"other",label:"other"}],className:"mb-4"})]})},Mt=function(){var e=Object(c.c)((function(e){return e.form})).orientation,t=Object(c.b)();return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("label",{children:"Looking for"}),Object(Fe.jsx)($e.a,{isMulti:!0,name:"orientation",value:e?e.map((function(e){return{value:e,label:e}})):[],onChange:function(e){var n=Array.isArray(e)?e.map((function(e){return e.value})):[];t({type:"ORIENTATION",data:{orientation:n}})},options:[{value:"male",label:"male"},{value:"female",label:"female"},{value:"other",label:"other"}],className:"mb-4"})]})},Bt=function(){var e=Object(c.c)((function(e){return e.form})).bio,t=Object(c.b)();return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("label",{children:"About me"}),Object(Fe.jsx)("textarea",{type:"text",maxLength:"280",defaultValue:e||"",name:"bio",style:{display:"block",borderWidth:"1px",borderColor:"#dae4e9",borderRadius:".25rem",width:"100%",padding:".75rem",marginBottom:"1rem",resize:"none"},onBlur:function(e){e.preventDefault(),t({type:"BIO",data:{bio:e.target.value}})},className:""})]})},Pt=n(198),Wt=function(){var e=Object(c.c)((function(e){return e.form})).tags,t=Object(c.c)((function(e){return e.public})).allTags,n=Object(c.b)();Object(Ie.useEffect)((function(){n(Q())}),[]);return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsx)("label",{children:"My interests"}),Object(Fe.jsx)(Pt.a,{isMulti:!0,name:"tags",placeholder:"Select or type...",value:e?e.map((function(e){return{value:e,label:e}})):[],options:t?t.map((function(e){return{value:e,label:e}})):[],onChange:function(e){var t=Array.isArray(e)?e.map((function(e){return("#"!==e.value.substr(0,1)?"#":"")+e.value})):[];n({type:"TAGS",data:{tags:t}})},className:"mb-4"})]})},zt=function(e){var t=Object(Ie.useState)(!1),n=Object(Le.a)(t,2),r=n[0],a=n[1],c={display:r?"":"none"};return Object(Fe.jsxs)(Fe.Fragment,{children:[Object(Fe.jsxs)("div",{className:"flex justify-between my-4",children:[Object(Fe.jsx)("p",{className:" font-bold",children:e.text||""}),Object(Fe.jsx)("button",{style:{color:"#3490dc"},tabIndex:-1,onClick:function(e){e.preventDefault(),a(!r)},children:r?"Hide":"Show"})]}),Object(Fe.jsx)("div",{style:c,children:e.children})]})},Ut=n(68),Ht=function(){var e=Object(c.c)((function(e){return e.user})),t=e.latitude,n=e.longitude,r=Object(c.c)((function(e){return e.user})),a=r.id,s=r.orientation,i=r.gender,o=r.bio,l=r.tags,b=Object(c.c)((function(e){return e.public})),f=b.ids,x=b.users,p=b.sortFilter,m=b.filterSliders,h=Object(c.c)((function(e){return e.match})).blocks,O=Object(c.b)();Object(Ie.useEffect)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=3;break}return e.next=3,O(q([],Object(j.a)(Object(j.a)({},m),{},{distance:1e5}),p,l,t,n,h));case 3:case"end":return e.stop()}}),e)}))),[f]);var g=Object(Ut.d)({id:"google-map-script",googleMapsApiKey:"AIzaSyCWW5QELk9CsQ0uY-Y8dTAC8j54u9PZeHk"}).isLoaded,v=Object(Ie.useState)(null),w=Object(Le.a)(v,2),y=(w[0],w[1]),N=Object(Ie.useCallback)((function(e){var t=new window.google.maps.LatLngBounds;if(t.extend(R),t.getNorthEast().equals(t.getSouthWest())){var n=new window.google.maps.LatLng(t.getNorthEast().lat()+.007,t.getNorthEast().lng()+.007);t.extend(n)}e.fitBounds(t),y(e)})),S=Object(Ie.useCallback)((function(e){y(null)})),R={lat:t,lng:n},E={center:R,zoom:6,streetViewControl:!1,disableDefaultUI:!0,zoomControl:!0};return g?Object(Fe.jsxs)(Ut.b,{mapContainerStyle:{width:"100%",height:"100vw",maxWidth:"500px",maxHeight:"500px",margin:"auto"},options:E,zoom:7,onLoad:N,onUnmount:S,children:[Object(Fe.jsx)(Ut.c,{position:R,draggable:!0,on:!0,onDragEnd:function(e){return function(e){var t=e.latLng.lat(),n=e.latLng.lng();if(t&&n){var r={latitude:t,longitude:n,gender:i,orientation:k(s),tags:l?l.map((function(e){return e})).join(""):"",bio:o};O(z(r,a))}}(e)}}),x&&x.length?x.map((function(e){return Object(Fe.jsx)(Ut.a,{center:{lat:e.latitude,lng:e.longitude},radius:1e4,options:{strokeColor:"#FF0000",strokeOpacity:.5,strokeWeight:2,fillColor:"#FF0000",fillOpacity:.35}},e.id)})):null]}):Object(Fe.jsx)(Fe.Fragment,{})},Yt=function(){var e=Object(c.c)((function(e){return e.user})),t=e.id,n=e.token,r=Object(c.c)((function(e){return e.form})),a=r.firstname,s=r.lastname,i=r.username,o=r.email,l=r.orientation,j=r.gender,b=r.bio,f=r.tags,x=r.errorMessage,p=r.notification,m=Object(c.c)((function(e){return e.match})),h=m.blocks,O=m.log,g=Object(c.b)();Object(Ie.useEffect)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&h&&t)){e.next=5;break}return e.next=3,g(T(t));case 3:return e.next=5,g(Oe(t));case 5:case"end":return e.stop()}}),e)}))),[n,h,t]),Object(Ie.useEffect)((function(){return function(){g((function(e){e({type:"CLEAR"})}))}}),[]);var v=function(){var e=Object(d.a)(u.a.mark((function e(n){var r,a,c,s,i,o,p,m,h,O,v,w,y;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),g((function(e){e({type:"CLEAR"})})),r=n.target.firstname.value,a=n.target.lastname.value,c=n.target.username.value,s=n.target.email.value,i=n.target.password.value,!s){e.next=11;break}if(!(o=qe({email:s})).email){e.next=11;break}return e.abrupt("return",g(D(o.email)));case 11:if(!i){e.next=15;break}if(!(p=qe({password:i})).password){e.next=15;break}return e.abrupt("return",g(D(p.password)));case 15:for(h in m={firstname:r,lastname:a,username:c,email:s,password:i,gender:j,orientation:k(l),tags:f?f.map((function(e){return e})).join(""):"",bio:b})null!==m[h]&&""!==m[h]||delete m[h];return e.next=19,g(z(m,t));case 19:return e.next=21,g($(f));case 21:if(m.firstname&&(n.target.firstname.value=""),m.lastname&&(n.target.lastname.value=""),m.username&&!x&&(n.target.username.value=""),m.email&&!x&&(n.target.email.value=""),m.password&&!x&&(n.target.password.value=""),O=n.target.photo.files[0],v=new FileReader,w={maxSizeMB:.5,maxWidthOrHeight:1920,useWebWorker:!0},!(O&&O.size<=1e6)){e.next=41;break}return e.prev=30,e.next=33,Object(At.a)(O,w);case 33:y=e.sent,v.readAsDataURL(y),v.onloadend=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(L({blob:v.result}));case 1:case"end":return e.stop()}}),e)}))),e.next=41;break;case 38:e.prev=38,e.t0=e.catch(30),n.target.photo.value=null;case 41:case"end":return e.stop()}}),e,null,[[30,38]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,g(ye({id:n.target.id,from:t,to:n.target.name,type:"remove"}));case 3:g({type:"NOTIF",data:"Profile updated"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y={borderWidth:"1px",borderColor:"#dae4e9",borderRadius:".25rem",padding:".75rem",width:"100%",height:"38px"},N={maxHeight:"50vh",overflow:"auto"},S={display:"block",borderWidth:"1px",borderColor:"#dae4e9",borderRadius:".25rem",width:"100%",padding:".5rem"};return Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"Your profile"}),p&&Object(Fe.jsx)("div",{className:"mb-4 text-center text-green-500",children:p}),x&&Object(Fe.jsx)("div",{className:"mb-4 text-center text-red-500",children:x}),Object(Fe.jsxs)("form",{onSubmit:v,children:[Object(Fe.jsx)(zt,{text:"Profile picture",children:Object(Fe.jsx)(It,{})}),Object(Fe.jsx)("hr",{className:"my-4"}),Object(Fe.jsxs)(zt,{text:"User details",children:[Object(Fe.jsxs)("div",{className:"flex mb-4",children:[Object(Fe.jsxs)("div",{className:"inline-block mr-2 w-1/2",children:[Object(Fe.jsx)("label",{children:"First name"}),Object(Fe.jsx)("input",{name:"firstname",type:"text",style:y,placeholder:a,maxLength:"50"})]}),Object(Fe.jsxs)("div",{className:"inline-block ml-2 w-1/2",children:[Object(Fe.jsx)("label",{children:"Last name"}),Object(Fe.jsx)("input",{name:"lastname",type:"text",style:y,placeholder:s,maxLength:"50"})]})]}),Object(Fe.jsx)("label",{children:"Username"}),Object(Fe.jsx)("input",{name:"username",type:"text",style:y,placeholder:i,className:"mb-4",maxLength:"50"}),Object(Fe.jsx)("label",{children:"Email"}),Object(Fe.jsx)("input",{name:"email",type:"text",style:y,placeholder:o,className:"mb-4",maxLength:"255"}),Object(Fe.jsx)("label",{children:"Password"}),Object(Fe.jsx)(He,{})]}),Object(Fe.jsx)("hr",{className:"my-4"}),Object(Fe.jsxs)(zt,{text:"Site preferences",children:[Object(Fe.jsx)(Ft,{}),Object(Fe.jsx)(Mt,{}),Object(Fe.jsx)(Wt,{}),Object(Fe.jsx)(Bt,{})]}),Object(Fe.jsx)("hr",{className:"my-4"}),Object(Fe.jsx)(zt,{text:"Location",children:Object(Fe.jsx)(Ht,{})}),Object(Fe.jsx)("hr",{className:"my-4"}),Object(Fe.jsx)(zt,{text:"Activity log",children:Object(Fe.jsx)("div",{style:N,children:O.length?O.map((function(e){return Object(Fe.jsxs)("div",{className:"",style:S,children:[Object(Fe.jsxs)("span",{children:[e.action," "]}),Object(Fe.jsx)(Ce.b,{to:"/browse/".concat(e.receiver),children:Object(Fe.jsxs)("span",{style:{color:"#3490dc"},children:[e.receivername," "]})}),Object(Fe.jsx)("span",{children:Object(Fe.jsx)(lt.a,{date:e.created_at,live:!1})})]},e.id)})):Object(Fe.jsx)("div",{style:S,children:Object(Fe.jsx)("span",{children:"You have no activity"})})})}),Object(Fe.jsx)("hr",{className:"my-4"}),Object(Fe.jsx)(zt,{text:"Blocked users",children:Object(Fe.jsx)("div",{style:N,className:"mb-4",children:h.length?h.map((function(e){return Object(Fe.jsxs)("div",{className:"flex justify-between ",style:S,children:[Object(Fe.jsx)("span",{children:e.firstname}),Object(Fe.jsx)("button",{id:e.id,name:e.receiver,className:"rounded bg-green-500 hover:bg-green-600 text-white ml-2 p-1",onClick:w,children:"Unblock"})]},e.id)})):Object(Fe.jsx)("div",{style:S,children:Object(Fe.jsx)("span",{children:"You have no blocked users"})})})}),Object(Fe.jsx)(Ye,{text:"Save changes"})]})]})},Gt=function(e){var t=e.user,n=Object(c.c)((function(e){return e.user})).id,r=Object(c.c)((function(e){return e.match})),a=r.matches,s=r.likes,i=Object(Ie.useState)(null),o=Object(Le.a)(i,2),l=o[0],u=o[1],d=s.find((function(e){return e.receiver===t.id}));return Object(Ie.useEffect)((function(){if(a){var e=0;a.map((function(n){n.chat.length&&n.chat.map((function(n){return n.sender===t.id&&0===n.status?e++:null}))})),e?u(e<99?e:99):0===d.is_seen?u(1):u(null)}}),[a]),Object(Fe.jsxs)("div",{className:"w-full flex items-center p-2 relative",children:[Object(Fe.jsx)("div",{className:"w-16 sm:w-20",children:Object(Fe.jsx)(Ce.b,{to:"/matches/".concat(t.id),children:Object(Fe.jsxs)("div",{className:"w-16 h-16 sm:w-20 sm:h-20 relative",children:[Object(Fe.jsx)("img",{src:t.avatar,alt:"avatar",className:"h-full w-full rounded-full object-cover shadow"}),Object(Fe.jsx)("div",{className:"absolute top-1/2 left-full transform -translate-x-1/2 -translate-y-1/2 border-2 border-white rounded-full shadow ",children:t.online?Object(Fe.jsx)("div",{className:"bg-green-500 h-4 w-4 rounded-full"}):Object(Fe.jsx)("div",{className:"bg-red-500 h-4 w-4 rounded-full"})})]})})}),Object(Fe.jsxs)(Ce.b,{to:"/chat/".concat(t.id),className:"flex flex-col w-full h-16 sm:h-20 pl-4 justify-center overflow-hidden relative",children:[Object(Fe.jsx)("span",{className:"truncate text-xl sm:text-2xl",children:t.firstname}),Object(Fe.jsx)("span",{className:"truncate text-sm sm:text-base text-gray-500 flex flex-row flex-nowrap",children:t.chat.length?t.chat[t.chat.length-1].sender===n?Object(Fe.jsxs)("div",{className:"flex text-center items-center",children:[Object(Fe.jsx)("svg",{className:"h-4 w-4 text-gray-500 mr-2 inline-block",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:Object(Fe.jsx)("path",{fill:"currentColor",d:"M8.309 189.836L184.313 37.851C199.719 24.546 224 35.347 224 56.015v80.053c160.629 1.839 288 34.032 288 186.258 0 61.441-39.581 122.309-83.333 154.132-13.653 9.931-33.111-2.533-28.077-18.631 45.344-145.012-21.507-183.51-176.59-185.742V360c0 20.7-24.3 31.453-39.687 18.164l-176.004-152c-11.071-9.562-11.086-26.753 0-36.328z"})}),t.chat[t.chat.length-1].message]}):t.chat[t.chat.length-1].message:"Say hi to your new match \ud83d\udc4b"}),Object(Fe.jsx)("div",{className:"absolute right-0 bg-white w-6 h-full rounded"}),Object(Fe.jsx)("div",{className:"bg-gradient-to-r from-transparent to-white absolute right-0 w-12 mr-6 h-full rounded"}),l&&Object(Fe.jsxs)("div",{className:"absolute w-6 h-6 top-1/2 right-3 transform -translate-y-1/2 rounded-full inline-block text-white bg-red-500 text-center",style:{lineHeight:"1.5rem"},children:[Object(Fe.jsx)("span",{className:"z-10 relative",children:l}),Object(Fe.jsx)("span",{className:"z-0 absolute bg-red-500 animate-ping w-6 h-6 top-0 left-0 rounded-full overflow-visible"})]})]}),Object(Fe.jsx)("div",{className:"absolute right-0 top-0 w-3/4 sm:w-4/5 mx-4",style:{marginTop:"-1px",borderBottomWidth:"1px",borderColor:"#dae4e9"}})]})},Vt=function(){var e=Object(c.c)((function(e){return e.match})).matches,t={borderTopWidth:"1px",borderColor:"#dae4e9"};return Object(Fe.jsx)("div",{className:"max-w-screen-sm mx-auto px-2 slideDown",children:Object(Fe.jsxs)("div",{className:"flex flex-col justify-center bg-white rounded ui-shadow",children:[Object(Fe.jsx)("h1",{className:"text-2xl sm:text-3xl text-center p-2 sm:p-4",children:"Matches"}),e.length?Object(Fe.jsx)("div",{className:"",style:t,children:e.map((function(e){return Object(Fe.jsx)(Gt,{user:e},e.id)}))}):Object(Fe.jsx)("div",{className:"flex justify-center items-center p-4",style:t,children:"You have not matched with anyone yet"})]})})},_t=function(e){var t=e.user,n=Object(Te.g)();return Object(Fe.jsxs)("div",{className:"w-full flex justify-between items-center p-2 relative ",style:{borderBottomWidth:"2px",borderColor:"#dae4e9"},children:[Object(Fe.jsxs)("section",{className:"flex items-center overflow-hidden",children:[Object(Fe.jsx)(Ce.b,{to:"/matches/".concat(t.id),children:Object(Fe.jsxs)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 relative",children:[Object(Fe.jsx)("img",{src:t.avatar,alt:"avatar",className:"h-full w-full rounded-full object-cover shadow"}),Object(Fe.jsx)("div",{className:"absolute top-1/2 left-full transform -translate-x-1/2 -translate-y-1/2 border-2 border-white rounded-full shadow ",children:t.online?Object(Fe.jsx)("div",{className:"bg-green-500 h-4 w-4 rounded-full"}):Object(Fe.jsx)("div",{className:"bg-red-500 h-4 w-4 rounded-full"})})]})}),Object(Fe.jsx)("span",{className:"text-xl sm:text-2xl pl-4 ",children:t.firstname})]}),Object(Fe.jsx)("section",{className:"flex items-center cursor-pointer select-none hover:opacity-50 p-2",onClick:function(){return n.goBack()},children:Object(Fe.jsx)(De.j,{className:"ml-2 h-8 w-8"})})]})},Kt=function(e){var t=e.message,n=t.sender,r=t.message;return n===Object(c.c)((function(e){return e.user})).id?Object(Fe.jsx)("div",{className:"flex justify-end px-4 mt-1 items-center overflow-ellipsis overflow-hidden break-words",children:Object(Fe.jsx)("div",{style:{display:"block",borderColor:"#dae4e9",borderRadius:"1rem",maxWidth:"80%",padding:"1rem",background:"#2979FF",color:"#FFF"},children:Object(Fe.jsx)("p",{children:r})})}):Object(Fe.jsx)("div",{className:"flex justify-start px-4 mt-1 items-center overflow-ellipsis overflow-hidden break-words",children:Object(Fe.jsx)("div",{style:{display:"block",borderColor:"#dae4e9",borderRadius:"1rem",maxWidth:"80%",padding:".75rem 1rem",background:"#F3F3F3"},children:Object(Fe.jsx)("p",{children:r})})})},qt=function(e){var t=e.messages,n=Object(Ie.useRef)(null);return Object(Ie.useEffect)((function(){n.current.scrollIntoView({behavior:"smooth"})}),[t]),Object(Fe.jsxs)("div",{className:"py-2 sm:py-4",style:{height:"100%",overflow:"auto"},children:[t.map((function(e){return Object(Fe.jsx)(Kt,{message:e},e.id)})),Object(Fe.jsx)("div",{ref:n})]})},Zt=n(201),Jt=(n(286),function(e){var t=e.message,n=e.setMessage,r=e.sendMessage,a=Object(Ie.useState)(!1),c=Object(Le.a)(a,2),s=c[0],i=c[1],o=function(e){var t=document.getElementById("emojipicker");t&&!t.contains(e.target)&&i(!1)};Object(Ie.useEffect)((function(){if(s)return window.addEventListener("click",o),function(){window.removeEventListener("click",o)}}),[s]);return Object(Fe.jsxs)("form",{className:"w-full flex justify-between items-center p-4 relative",style:{borderTopWidth:"2px",borderColor:"#dae4e9"},children:[Object(Fe.jsx)("input",{style:{display:"inline-block",borderWidth:"1px",borderColor:"#dae4e9",borderTopLeftRadius:".5rem",borderBottomLeftRadius:".5rem",width:"100%",padding:".75rem",paddingRight:"2.75rem"},type:"text",maxLength:"280",placeholder:"Type a message...",value:t,onChange:function(e){return n(e.target.value)},onKeyPress:function(e){return"Enter"===e.key?r(e):null}}),s&&Object(Fe.jsx)("div",{className:"absolute bottom-3/4 right-20 mx-auto mb-1 ml-4",id:"emojipicker",children:Object(Fe.jsx)(Zt.a,{onSelect:function(e){return n(t+e.native)},style:{width:"100%"}})}),Object(Fe.jsx)("div",{className:"absolute p-3 top-1/2 right-16 transform -translate-y-1/2 cursor-pointer",children:Object(Fe.jsx)(De.c,{className:"h-8 w-8 mr-3 text-gray-400",onClick:function(){return i(!s)}})}),Object(Fe.jsx)("button",{style:{display:"inline-block",borderWidth:"1px",borderColor:"#dae4e9",borderTopRightRadius:".5rem",borderBottomRightRadius:".5rem",padding:".75rem",color:"#fff",background:"#2979FF",userSelect:"none"},onClick:function(e){return r(e)},children:"Send"})]})}),Qt=function(e){var t=e.profile,n=Object(c.c)((function(e){return e.user})).id,r=Object(c.c)((function(e){return e.match})).likes,a=Object(Ie.useState)(""),s=Object(Le.a)(a,2),i=s[0],o=s[1],l=Object(Ie.useState)([]),u=Object(Le.a)(l,2),d=u[0],j=u[1],b=Object(c.b)(),f=r.find((function(e){return e.receiver===t.id}));Object(Ie.useEffect)((function(){t.chat.length&&(j(t.chat),t.chat.find((function(e){return e.receiver===n&&0===e.status}))&&b(ke({type:"read",sender:t.id,receiver:n}))),0===f.is_seen&&b(ve({from:n,to:t.id,type:"read",id:f.id}))}),[t]);return Object(Fe.jsx)("div",{className:"max-w-screen-sm mx-auto px-2",children:Object(Fe.jsxs)("div",{className:"flex flex-col justify-center bg-white rounded ui-shadow h-screen",style:{height:"calc(100vh - (80px + 64px))",maxHeight:"800px"},children:[Object(Fe.jsx)(_t,{user:t}),Object(Fe.jsx)(qt,{messages:d}),Object(Fe.jsx)(Jt,{message:i,setMessage:o,sendMessage:function(e){e.preventDefault(),i&&""!==i&&(b(ke({type:"new",message:i,sender:n,receiver:t.id})),o(""))}})]})})},$t=n(199),Xt=n.n($t),en=n(200),tn=function(e){var t=e.readAll;return Object(Fe.jsxs)("div",{className:"flex justify-center p-2 sm:p-4 select-none cursor-pointer hover:underline",style:{borderTopWidth:"1px",borderColor:"#dae4e9",color:"#3490dc"},onClick:function(){return t()},children:[Object(Fe.jsx)(De.i,{className:" h-5 w-5 mr-2"}),Object(Fe.jsx)("span",{children:"Mark all as read"})]})},nn=function(e){var t=e.notif,n=e.readOne,r=Object(c.c)((function(e){return e.match})),a=r.likes,s=r.matches,i=r.publicLikes,o=s.find((function(e){return e.id===t.sender})),l=a.find((function(e){return e.receiver===t.sender})),u=i.find((function(e){return e.sender===t.sender}));return Object(Fe.jsxs)("div",{className:"w-full flex items-center p-2 relative",onClick:function(){t.id&&0===t.status&&n(t.id)},style:0===t.status?{cursor:"pointer",backgroundColor:"rgba(248,247,251,255)"}:null,children:[Object(Fe.jsxs)("div",{className:"w-12 sm:w-14",style:0===t.status?{marginLeft:"1.5rem"}:{marginLeft:"0.5rem"},children:[Object(Fe.jsx)(Ce.b,{to:"/browse/".concat(t.sender),children:Object(Fe.jsxs)("div",{className:"w-10 h-10 sm:w-14 sm:h-14 relative",children:[Object(Fe.jsx)("img",{src:t.avatar,alt:"avatar",className:"h-full w-full rounded-full object-cover shadow"}),Object(Fe.jsx)("div",{className:"absolute top-1/2 left-full transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-full shadow ",children:o?Object(Fe.jsx)(Ae.e,{className:"h-6 w-6 text-pink-500"}):l?Object(Fe.jsx)(De.e,{className:"h-6 w-6 text-pink-500"}):u?Object(Fe.jsx)(De.e,{className:"h-6 w-6 text-pink-500 "}):null})]})}),0===t.status&&Object(Fe.jsx)("div",{className:"absolute w-4 h-4 top-1/2 left-2 transform -translate-y-1/2 rounded-full inline-block text-white bg-red-500 text-center",style:{lineHeight:"1.5rem"},children:Object(Fe.jsx)("span",{className:"z-0 absolute animate-ping bg-red-500 w-4 h-4 top-0 left-0 rounded-full overflow-visible"})})]}),Object(Fe.jsxs)("div",{className:"flex flex-row justify-between w-full overflow-hidden",style:l||u?{marginLeft:"0.5rem"}:null,children:[Object(Fe.jsxs)("div",{className:"flex flex-col h-12 sm:h-14 pl-2 justify-center overflow-hidden relative",children:[Object(Fe.jsx)(Ce.b,{to:"/browse/".concat(t.sender),children:Object(Fe.jsx)("span",{className:"truncate text-lg",children:t.sendername})}),Object(Fe.jsx)("span",{className:"truncate text-sm sm:text-base text-gray-500 flex flex-row flex-nowrap select-none",children:function(){switch(t.action){case"view":return"Viewed your profile";case"like":return l?"Matched with you":"Liked you";case"unlike":return l?"Unmatched with you":"Unliked you"}}()})]}),Object(Fe.jsxs)("div",{className:"flex flex-col justify-center mr-2",children:[Object(Fe.jsx)("div",{className:"absolute right-0 bg-white w-12 h-full rounded"}),Object(Fe.jsx)("div",{className:"bg-gradient-to-r from-transparent to-white absolute right-0 w-20 mr-12 h-full rounded"}),Object(Fe.jsx)("span",{className:"text-sm sm:text-base text-gray-500 z-10 select-none",children:Xt()(t.created_at).twitterShort()})]})]}),Object(Fe.jsx)("div",{className:"absolute right-0 top-0 w-full",style:{marginTop:"-1px",borderBottomWidth:"1px",borderColor:"#dae4e9"}})]})},rn=function(){var e=Object(c.c)((function(e){return e.user})).id,t=Object(c.c)((function(e){return e.match})).notif,n=Object(Ie.useState)([]),r=Object(Le.a)(n,2),a=r[0],s=r[1],i=Object(Ie.useRef)(!0),o=Object(c.b)(),l={borderTopWidth:"1px",borderColor:"#dae4e9",height:"100%",overflow:"auto"},u=function(t){o(Ne([t],e))};return Object(Ie.useEffect)((function(){if(t){var e=t.slice(0,50);e.length>=t.length&&(i.current=!1),s(e.slice(0,50))}}),[t]),Object(Fe.jsx)("div",{className:"max-w-screen-sm mx-auto px-2 slideDown",children:Object(Fe.jsxs)("div",{className:"flex flex-col justify-center bg-white rounded ui-shadow",style:{height:"calc(100vh - (80px + 64px))",maxHeight:"800px"},children:[Object(Fe.jsx)("h1",{className:"text-2xl sm:text-3xl text-center p-2 sm:p-4",children:"Notifications"}),Object(Fe.jsx)("div",{id:"scrollContainer",style:{height:"100%",overflow:"auto"},children:Object(Fe.jsx)(en.a,{dataLength:a.length,next:function(){s(a.concat(t.slice(a.length,a.length+50))),a.length>=t.length&&(i.current=!1)},hasMore:i.current,scrollableTarget:"scrollContainer",loader:Object(Fe.jsx)("div",{className:"flex justify-center items-center p-4",style:l,children:"Loading..."}),endMessage:null,children:a.length?Object(Fe.jsx)("div",{style:l,children:a.map((function(e){return Object(Fe.jsx)(nn,{notif:e,readOne:u},e.id)}))}):Object(Fe.jsx)("div",{className:"flex justify-center items-center p-4",style:l,children:"You have no notifications"})})}),Object(Fe.jsx)(tn,{readAll:function(){var n=t.filter((function(e){return 0===e.status})).map((function(e){return e.id}));n.length&&o(Ne(n,e))}})]})})},an=function(){var e=Object(c.c)((function(e){return e.user})),t=e.id,n=(e.token,Object(c.c)((function(e){return e.form}))),r=n.orientation,a=n.gender,s=n.bio,i=n.tags,o=n.errorMessage,l=n.notification,j=Object(c.b)(),b=function(){var e=Object(d.a)(u.a.mark((function e(n){var c,o,l,b,f;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c={gender:a,orientation:k(r),tags:i?i.map((function(e){return e})).join(""):"",bio:s},e.next=4,j(z(c,t));case 4:return e.next=6,j($(i));case 6:if(o=n.target.photo.files[0],l=new FileReader,b={maxSizeMB:.5,maxWidthOrHeight:1920,useWebWorker:!0},!(o&&o.size<=1e6)){e.next=21;break}return e.prev=10,e.next=13,Object(At.a)(o,b);case 13:f=e.sent,l.readAsDataURL(f),l.onloadend=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(L({blob:l.result}));case 1:case"end":return e.stop()}}),e)}))),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(10),n.target.photo.value=null;case 21:case"end":return e.stop()}}),e,null,[[10,18]])})));return function(t){return e.apply(this,arguments)}}();return Object(Fe.jsxs)(We,{children:[Object(Fe.jsx)(ze,{title:"Your profile"}),l&&Object(Fe.jsx)("div",{className:"mb-4 text-center text-green-500",children:l}),Object(Fe.jsx)("p",{className:"mb-4 text-center",children:"Finish setting up your profile to start matching"}),o&&Object(Fe.jsx)("div",{className:"mb-4 text-center text-red-500",children:o}),Object(Fe.jsxs)("form",{onSubmit:b,children:[Object(Fe.jsx)(It,{}),Object(Fe.jsx)(Ft,{}),Object(Fe.jsx)(Mt,{}),Object(Fe.jsx)(Wt,{}),Object(Fe.jsx)(Bt,{}),Object(Fe.jsx)(Ye,{text:"Save changes"})]})]})},cn=fe()("localhost:3001"),sn=function(){var e=Object(c.c)((function(e){return e.user})),t=e.id,n=e.loggedIn,r=e.userComplete,a=e.orientation,s=Object(c.c)((function(e){return e.form})).errorMessage,i=Object(c.c)((function(e){return e.public})),o=i.ids,l=i.loadingApp,j=Object(c.c)((function(e){return e.match})),b=j.matches,x=j.likes,m=j.blocks,h=Object(c.b)();return Object(Ie.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("user"));e?(p(e.token),h({type:"LOGIN",data:e})):(window.localStorage.clear(),h({type:"LOADINGAPP",data:!1})),h(function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("https://geolocation-db.com/json/");case 2:n=e.sent,r={ip:n.data.IPv4},t({type:"LOOKUP",data:r});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[h]),Object(Ie.useEffect)((function(){return function(){cn.close()}}),[]),Object(Ie.useEffect)((function(){"token expired"===s&&(window.localStorage.clear(),window.location.href="/expired")}),[s]),Object(Ie.useEffect)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,h(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.getLikes();case 3:return n=e.sent,t({type:"SETLIKES",data:n}),e.next=7,ce.getReports();case 7:return n=e.sent,t({type:"SETREPORTS",data:n}),e.next=11,ie.getBlocks();case 11:n=e.sent,t({type:"SETBLOCKS",data:n}),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(0),n=e.t0.response&&e.t0.response.data?e.t0.response.data.error:"Database error",t({type:"ERROR",data:n});case 19:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}());case 3:e.next=6;break;case 5:n&&!r&&h({type:"LOADINGAPP",data:!1});case 6:case"end":return e.stop()}}),e)}))),[r,n]),Object(Ie.useEffect)((function(){if(n){var e=JSON.parse(window.localStorage.getItem("user"));cn.emit("login",{data:e},(function(e){e&&console.log(e)}))}}),[n]),Object(Ie.useEffect)(Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!m){e.next=7;break}return e.next=3,h(he(t));case 3:return e.next=5,h(me());case 5:return e.next=7,h(J(m));case 7:case"end":return e.stop()}}),e)}))),[t,m,a,x]),Object(Ie.useEffect)((function(){t&&m&&(cn.on("message",(function(){h(me())})),cn.on("notification",(function(e){m.find((function(t){return t.receiver===e}))||h(he(t))})),cn.on("like",(function(e){m.find((function(t){return t.receiver===e}))||h(function(){var e=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.getLikes();case 3:n=e.sent,t({type:"SETLIKES",data:n}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),n=e.t0.response&&e.t0.response.data?e.t0.response.data.error:"Database error",t({type:"ERROR",data:n});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())})))}),[t,m]),Object(Fe.jsx)(Pe,{children:l?Object(Fe.jsx)(We,{children:Object(Fe.jsx)("div",{className:"text-center",children:"Loading..."})}):Object(Fe.jsxs)(Te.d,{children:[Object(Fe.jsx)(Te.b,{path:"/browse/:id",exact:!0,render:function(e){var t=e.match,a=parseInt(t.params.id),c=o.find((function(e){return e===a}));return n?r?c?Object(Fe.jsx)(gt,{profileId:c}):Object(Fe.jsx)(Te.a,{to:"/browse"}):Object(Fe.jsx)(an,{}):Object(Fe.jsx)(Te.a,{to:"/"})}}),Object(Fe.jsx)(Te.b,{path:"/browse",render:function(){return n?r?Object(Fe.jsx)(st,{}):Object(Fe.jsx)(an,{}):Object(Fe.jsx)(Te.a,{to:"/"})}}),Object(Fe.jsx)(Te.b,{path:"/chat/:id",exact:!0,render:function(e){var t=e.match,a=parseInt(t.params.id),c=b.find((function(e){return e.id===a}));return n?r?c?Object(Fe.jsx)(Qt,{profile:c}):Object(Fe.jsx)(Te.a,{to:"/matches"}):Object(Fe.jsx)(an,{}):Object(Fe.jsx)(Te.a,{to:"/"})}}),Object(Fe.jsx)(Te.b,{path:"/login",render:function(){return n?Object(Fe.jsx)(Te.a,{to:"/"}):Object(Fe.jsx)(Ge,{})}}),Object(Fe.jsx)(Te.b,{path:"/verify",render:function(){return n?Object(Fe.jsx)(Te.a,{to:"/"}):Object(Fe.jsx)(Ge,{})}}),Object(Fe.jsx)(Te.b,{path:"/expired",render:function(){return n?Object(Fe.jsx)(Te.a,{to:"/"}):Object(Fe.jsx)(Ge,{})}}),Object(Fe.jsx)(Te.b,{path:"/signup",render:function(){return n?Object(Fe.jsx)(Te.a,{to:"/"}):Object(Fe.jsx)(Ze,{})}}),Object(Fe.jsx)(Te.b,{path:"/forgot",render:function(){return n?Object(Fe.jsx)(Te.a,{to:"/"}):Object(Fe.jsx)(Je,{})}}),Object(Fe.jsx)(Te.b,{path:"/reset/:token",render:function(){return n?Object(Fe.jsx)(Te.a,{to:"/"}):Object(Fe.jsx)(Dt,{})}}),Object(Fe.jsx)(Te.b,{path:"/profile",render:function(){return n&&r?Object(Fe.jsx)(Yt,{}):Object(Fe.jsx)(Te.a,{to:"/"})}}),Object(Fe.jsx)(Te.b,{path:"/matches/:id",exact:!0,render:function(e){var t=e.match,a=parseInt(t.params.id),c=b.find((function(e){return e.id===a}));return n?r?c?Object(Fe.jsx)(Lt,{profile:c}):Object(Fe.jsx)(Te.a,{to:"/matches"}):Object(Fe.jsx)(an,{}):Object(Fe.jsx)(Te.a,{to:"/"})}}),Object(Fe.jsx)(Te.b,{path:"/matches",render:function(){return n?Object(Fe.jsx)(Vt,{}):Object(Fe.jsx)(Te.a,{to:"/"})}}),Object(Fe.jsx)(Te.b,{path:"/notif",render:function(){return n?Object(Fe.jsx)(rn,{}):Object(Fe.jsx)(Te.a,{to:"/"})}}),Object(Fe.jsx)(Te.b,{path:"/",render:function(){return n?Object(Fe.jsx)(Te.a,{to:"/browse"}):Object(Fe.jsx)(Te.a,{to:"/login"})}})]})})};a.a.render(Object(Fe.jsx)(c.a,{store:Ee,children:Object(Fe.jsx)(Ce.a,{children:Object(Fe.jsx)(sn,{})})}),document.getElementById("root"))}},[[288,1,2]]]);
//# sourceMappingURL=main.982bc829.chunk.js.map